import{debug as e,logOpcode as t,recordStackSize as n,opcodeMetadata as s,check as i,CheckPrimitive as r,CheckNumber as a,CheckOption as o,CheckHandle as l,CheckBlockSymbolTable as c,CheckInstanceof as u,CheckString as p,CheckElement as d,CheckMaybe as h,CheckNode as m,CheckOr as f,CheckProgramSymbolTable as g,CheckInterface as b,CheckFunction as y,wrap as k,CheckArray as v,CheckDict as w,CheckUnknown as S,CheckObject as E,CheckSafeString as x,CheckDocumentFragment as C}from"@glimmer/debug";import{UNDEFINED_REFERENCE as N,valueForRef as T,createComputeRef as _,createConstRef as B,createPrimitiveRef as A,isConstRef as M,NULL_REFERENCE as R,TRUE_REFERENCE as O,FALSE_REFERENCE as L,REFERENCE as D,createDebugAliasRef as V,childRefFor as U,createIteratorRef as I,isInvokableRef as $,updateRef as H,createIteratorItemRef as G}from"@glimmer/reference";import{assign as P,unwrap as j,expect as F,NS_SVG as z,castToBrowser as W,Stack as Y,assert as J,LOCAL_LOGGER as q,isObject as K,decodeHandle as X,isHandle as Q,decodeImmediate as Z,debugToString as ee,EMPTY_STRING_ARRAY as te,dict as ne,unwrapTemplate as se,enumerate as ie,emptyArray as re,INSERT_BEFORE_END as ae,INSERT_BEFORE_BEGIN as oe,clearElement as le,INSERT_AFTER_BEGIN as ce,castToSimple as ue,buildUntouchableThis as pe,isDict as de,logStep as he,unwrapHandle as me,reverse as fe,COMMENT_NODE as ge}from"@glimmer/util";import{Op as be,$pc as ye,$sp as ke,$ra as ve,$fp as we,CurriedTypes as Se,$t0 as Ee,$t1 as xe,InternalComponentCapabilities as Ce,$v0 as Ne,ContentType as Te,CurriedType as _e,MachineOp as Be,isLowLevelRegister as Ae,$s1 as Me,$s0 as Re}from"@glimmer/vm";import{registerDestructor as Oe,destroy as Le,associateDestroyableChild as De,_hasDestroyableChildren as Ve,isDestroying as Ue,isDestroyed as Ie,destroyChildren as $e}from"@glimmer/destroyable";export{destroy,isDestroyed,isDestroying,registerDestructor}from"@glimmer/destroyable";import{warnIfStyleNotTrusted as He,toBool as Ge,getPath as Pe,setPath as je,deprecate as Fe,assertGlobalContextWasSet as ze}from"@glimmer/global-context";import{getInternalModifierManager as We,managerHasCapability as Ye,getInternalHelperManager as Je,hasInternalComponentManager as qe,hasInternalHelperManager as Ke,setInternalComponentManager as Xe,setInternalHelperManager as Qe,hasValue as Ze,hasDestroyable as et,setInternalModifierManager as tt}from"@glimmer/manager";import{beginTrackFrame as nt,endTrackFrame as st,CONSTANT_TAG as it,INITIAL as rt,validateTag as at,consumeTag as ot,valueForTag as lt,CURRENT_TAG as ct,COMPUTE as ut,track as pt,updateTag as dt,createCache as ht,getValue as mt,createUpdatableTag as ft,debug as gt,resetTracking as bt}from"@glimmer/validator";import{RuntimeProgramImpl as yt}from"@glimmer/program";import{getOwner as kt}from"@glimmer/owner";const vt=!("undefined"!=typeof window&&window.location&&/[&?]disable_local_debug/u.test(window.location.search)),wt=!("undefined"==typeof window||!window.location||!/[&?]enable_local_should_log/u.test(window.location.search));class St{bucket;constructor(e){this.bucket=e?P({},e):{}}get(e){return j(this.bucket[e])}set(e,t){return this.bucket[e]=t}child(){return new St(this.bucket)}}class Et{static root(e,t=0,n){let s=new Array(t+1).fill(N);return new Et(s,n,null,null,null).init({self:e})}static sized(e=0,t){let n=new Array(e+1).fill(N);return new Et(n,t,null,null,null)}constructor(e,t,n,s,i){this.slots=e,this.owner=t,this.callerScope=n,this.evalScope=s,this.partialMap=i}init({self:e}){return this.slots[0]=e,this}getSelf(){return this.get(0)}getSymbol(e){return this.get(e)}getBlock(e){let t=this.get(e);return t===N?null:t}getEvalScope(){return this.evalScope}getPartialMap(){return this.partialMap}bind(e,t){this.set(e,t)}bindSelf(e){this.set(0,e)}bindSymbol(e,t){this.set(e,t)}bindBlock(e,t){this.set(e,t)}bindEvalScope(e){this.evalScope=e}bindPartialMap(e){this.partialMap=e}bindCallerScope(e){this.callerScope=e}getCallerScope(){return this.callerScope}child(){return new Et(this.slots.slice(),this.owner,this.callerScope,this.evalScope,this.partialMap)}get(e){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);return this.slots[e]}set(e,t){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);this.slots[e]=t}}const xt=Symbol("INNER_VM"),Ct=Symbol("DESTROYABLE_STACK"),Nt=Symbol("STACKS"),Tt=Symbol("REGISTERS"),_t=Symbol("HEAP"),Bt=Symbol("CONSTANTS"),At=Symbol("ARGS");class Mt{constructor(e,t){this.element=e,this.nextSibling=t}}class Rt{constructor(e,t,n){this.parentNode=e,this.first=t,this.last=n}parentElement(){return this.parentNode}firstNode(){return this.first}lastNode(){return this.last}}function Ot(e,t){let n=e.parentElement(),s=e.firstNode(),i=e.lastNode(),r=s;for(;;){let e=r.nextSibling;if(n.insertBefore(r,t),r===i)return e;r=F(e,"invalid bounds")}}function Lt(e){let t=e.parentElement(),n=e.firstNode(),s=e.lastNode(),i=n;for(;;){let e=i.nextSibling;if(t.removeChild(i),i===s)return e;i=F(e,"invalid bounds")}}function Dt(e){return Vt(e)?"":String(e)}function Vt(e){return null==e||"function"!=typeof e.toString}function Ut(e){return"object"==typeof e&&null!==e&&"function"==typeof e.toHTML}function It(e){return"object"==typeof e&&null!==e&&"number"==typeof e.nodeType}function $t(e){return"string"==typeof e}function Ht(e,t){let n,s;if(t in e)s=t,n="prop";else{let i=t.toLowerCase();i in e?(n="prop",s=i):(n="attr",s=t)}return"prop"!==n||"style"!==s.toLowerCase()&&!function(e,t){let n=Gt[e.toUpperCase()];return n&&n[t.toLowerCase()]||!1}(e.tagName,s)||(n="attr"),{normalized:s,type:n}}const Gt={INPUT:{form:!0,autocorrect:!0,list:!0},SELECT:{form:!0},OPTION:{form:!0},TEXTAREA:{form:!0},LABEL:{form:!0},FIELDSET:{form:!0},LEGEND:{form:!0},OBJECT:{form:!0},OUTPUT:{form:!0},BUTTON:{form:!0}};const Pt=["javascript:","vbscript:"],jt=["A","BODY","LINK","IMG","IFRAME","BASE","FORM"],Ft=["EMBED"],zt=["href","src","background","action"],Wt=["src"];function Yt(e,t){return-1!==e.indexOf(t)}function Jt(e,t){return(null===e||Yt(jt,e))&&Yt(zt,t)}function qt(e,t){return null!==e&&(Yt(Ft,e)&&Yt(Wt,t))}function Kt(e,t){return Jt(e,t)||qt(e,t)}let Xt,Qt;function Zt(e){return Xt||(Xt=function(){if("object"==typeof URL&&null!==URL&&"function"==typeof URL.parse){let e=URL;return t=>{let n=null;return"string"==typeof t&&(n=e.parse(t).protocol),null===n?":":n}}if("function"==typeof URL)return e=>{try{return new URL(e).protocol}catch(e){return":"}};throw new Error('@glimmer/runtime needs a valid "globalThis.URL"')}()),Xt(e)}function en(e,t,n){let s=null;if(null==n)return n;if(Ut(n))return n.toHTML();s=e?e.tagName.toUpperCase():null;let i=Dt(n);if(Jt(s,t)){let e=Zt(i);if(Yt(Pt,e))return`unsafe:${i}`}return qt(s,t)?`unsafe:${i}`:i}function tn(e,t,n,s=!1){const{tagName:i,namespaceURI:r}=e,a={element:e,name:t,namespace:n};if("style"===t&&!s)return new Qt(a);if(r===z)return nn(i,t,a);const{type:o,normalized:l}=Ht(e,t);return"attr"===o?nn(i,l,a):function(e,t,n){if(Kt(e,t))return new on(t,n);if(function(e,t){return("INPUT"===e||"TEXTAREA"===e)&&"value"===t}(e,t))return new cn(t,n);if(function(e,t){return"OPTION"===e&&"selected"===t}(e,t))return new un(t,n);return new an(t,n)}(i,l,a)}function nn(e,t,n){return Kt(e,t)?new ln(n):new rn(n)}class sn{constructor(e){this.attribute=e}}class rn extends sn{set(e,t,n){const s=pn(t);if(null!==s){const{name:t,namespace:n}=this.attribute;e.__setAttribute(t,s,n)}}update(e,t){const n=pn(e),{element:s,name:i}=this.attribute;null===n?s.removeAttribute(i):s.setAttribute(i,n)}}class an extends sn{constructor(e,t){super(t),this.normalizedName=e}value;set(e,t,n){null!=t&&(this.value=t,e.__setProperty(this.normalizedName,t))}update(e,t){const{element:n}=this.attribute;this.value!==e&&(n[this.normalizedName]=this.value=e,null==e&&this.removeAttribute())}removeAttribute(){const{element:e,namespace:t}=this.attribute;t?e.removeAttributeNS(t,this.normalizedName):e.removeAttribute(this.normalizedName)}}class on extends an{set(e,t,n){const{element:s,name:i}=this.attribute,r=en(s,i,t);super.set(e,r,n)}update(e,t){const{element:n,name:s}=this.attribute,i=en(n,s,e);super.update(i,t)}}class ln extends rn{set(e,t,n){const{element:s,name:i}=this.attribute,r=en(s,i,t);super.set(e,r,n)}update(e,t){const{element:n,name:s}=this.attribute,i=en(n,s,e);super.update(i,t)}}class cn extends an{set(e,t){e.__setProperty("value",Dt(t))}update(e){const t=W(this.attribute.element,["input","textarea"]),n=t.value,s=Dt(e);n!==s&&(t.value=s)}}class un extends an{set(e,t){null!=t&&!1!==t&&e.__setProperty("selected",!0)}update(e){const t=W(this.attribute.element,"option");t.selected=!!e}}function pn(e){return!1===e||null==e||void 0===e.toString?null:!0===e?"":"function"==typeof e?null:String(e)}Qt=class extends rn{set(e,t,n){He(t),super.set(e,t,n)}update(e,t){He(e),super.update(e,t)}};class dn{constructor(e){this.node=e}firstNode(){return this.node}}class hn{constructor(e){this.node=e}lastNode(){return this.node}}const mn=Symbol("CURSOR_STACK");class fn{dom;updateOperations;constructing=null;operations=null;env;[mn]=new Y;modifierStack=new Y;blockStack=new Y;static forInitialRender(e,t){return new this(e,t.element,t.nextSibling).initialize()}static resume(e,t){let n=new this(e,t.parentElement(),t.reset(e)).initialize();return n.pushLiveBlock(t),n}constructor(e,t,n){this.pushElement(t,n),this.env=e,this.dom=e.getAppendOperations(),this.updateOperations=e.getDOM()}initialize(){return this.pushSimpleBlock(),this}debugBlocks(){return this.blockStack.toArray()}get element(){return this[mn].current.element}get nextSibling(){return this[mn].current.nextSibling}get hasBlocks(){return this.blockStack.size>0}block(){return F(this.blockStack.current,"Expected a current live block")}popElement(){this[mn].pop(),F(this[mn].current,"can't pop past the last element")}pushSimpleBlock(){return this.pushLiveBlock(new gn(this.element))}pushUpdatableBlock(){return this.pushLiveBlock(new yn(this.element))}pushBlockList(e){return this.pushLiveBlock(new kn(this.element,e))}pushLiveBlock(e,t=!1){let n=this.blockStack.current;return null!==n&&(t||n.didAppendBounds(e)),this.__openBlock(),this.blockStack.push(e),e}popBlock(){return this.block().finalize(this),this.__closeBlock(),F(this.blockStack.pop(),"Expected popBlock to return a block")}__openBlock(){}__closeBlock(){}openElement(e){let t=this.__openElement(e);return this.constructing=t,t}__openElement(e){return this.dom.createElement(e,this.element)}flushElement(e){let t=this.element,n=F(this.constructing,"flushElement should only be called when constructing an element");this.__flushElement(t,n),this.constructing=null,this.operations=null,this.pushModifiers(e),this.pushElement(n,null),this.didOpenElement(n)}__flushElement(e,t){this.dom.insertBefore(e,t,this.nextSibling)}closeElement(){return this.willCloseElement(),this.popElement(),this.popModifiers()}pushRemoteElement(e,t,n){return this.__pushRemoteElement(e,t,n)}__pushRemoteElement(e,t,n){if(this.pushElement(e,n),void 0===n)for(;e.lastChild;)e.removeChild(e.lastChild);let s=new bn(e);return this.pushLiveBlock(s,!0)}popRemoteElement(){this.popBlock(),this.popElement()}pushElement(e,t=null){this[mn].push(new Mt(e,t))}pushModifiers(e){this.modifierStack.push(e)}popModifiers(){return this.modifierStack.pop()}didAppendBounds(e){return this.block().didAppendBounds(e),e}didAppendNode(e){return this.block().didAppendNode(e),e}didOpenElement(e){return this.block().openElement(e),e}willCloseElement(){this.block().closeElement()}appendText(e){return this.didAppendNode(this.__appendText(e))}__appendText(e){let{dom:t,element:n,nextSibling:s}=this,i=t.createTextNode(e);return t.insertBefore(n,i,s),i}__appendNode(e){return this.dom.insertBefore(this.element,e,this.nextSibling),e}__appendFragment(e){let t=e.firstChild;if(t){let n=new Rt(this.element,t,e.lastChild);return this.dom.insertBefore(this.element,e,this.nextSibling),n}{const e=this.__appendComment("");return new Rt(this.element,e,e)}}__appendHTML(e){return this.dom.insertHTMLBefore(this.element,this.nextSibling,e)}appendDynamicHTML(e){let t=this.trustedContent(e);this.didAppendBounds(t)}appendDynamicText(e){let t=this.untrustedContent(e);return this.didAppendNode(t),t}appendDynamicFragment(e){let t=this.__appendFragment(e);this.didAppendBounds(t)}appendDynamicNode(e){let t=this.__appendNode(e),n=new Rt(this.element,t,t);this.didAppendBounds(n)}trustedContent(e){return this.__appendHTML(e)}untrustedContent(e){return this.__appendText(e)}appendComment(e){return this.didAppendNode(this.__appendComment(e))}__appendComment(e){let{dom:t,element:n,nextSibling:s}=this,i=t.createComment(e);return t.insertBefore(n,i,s),i}__setAttribute(e,t,n){this.dom.setAttribute(this.constructing,e,t,n)}__setProperty(e,t){this.constructing[e]=t}setStaticAttribute(e,t,n){this.__setAttribute(e,t,n)}setDynamicAttribute(e,t,n,s){let i=tn(this.constructing,e,s,n);return i.set(this,t,this.env),i}}class gn{first=null;last=null;nesting=0;constructor(e){this.parent=e}parentElement(){return this.parent}firstNode(){return F(this.first,"cannot call `firstNode()` while `SimpleLiveBlock` is still initializing").firstNode()}lastNode(){return F(this.last,"cannot call `lastNode()` while `SimpleLiveBlock` is still initializing").lastNode()}openElement(e){this.didAppendNode(e),this.nesting++}closeElement(){this.nesting--}didAppendNode(e){0===this.nesting&&(this.first||(this.first=new dn(e)),this.last=new hn(e))}didAppendBounds(e){0===this.nesting&&(this.first||(this.first=e),this.last=e)}finalize(e){null===this.first&&e.appendComment("")}}class bn extends gn{constructor(e){super(e),Oe(this,(()=>{this.parentElement()===this.firstNode().parentNode&&Lt(this)}))}}class yn extends gn{reset(){Le(this);let e=Lt(this);return this.first=null,this.last=null,this.nesting=0,e}}class kn{constructor(e,t){this.parent=e,this.boundList=t,this.parent=e,this.boundList=t}parentElement(){return this.parent}firstNode(){return F(this.boundList[0],"cannot call `firstNode()` while `LiveBlockList` is still initializing").firstNode()}lastNode(){let e=this.boundList;return F(e[e.length-1],"cannot call `lastNode()` while `LiveBlockList` is still initializing").lastNode()}openElement(e){J(!1,"Cannot openElement directly inside a block list")}closeElement(){J(!1,"Cannot closeElement directly inside a block list")}didAppendNode(e){J(!1,"Cannot create a new node directly inside a block list")}didAppendBounds(e){}finalize(e){J(this.boundList.length>0,"boundsList cannot be empty")}}function vn(e,t){return fn.forInitialRender(e,t)}const wn=new class{evaluateOpcode=new Array(be.Size).fill(null);add(e,t,n="syscall"){this.evaluateOpcode[e]={syscall:"machine"!==n,evaluate:t}}debugBefore(s,i){let r,a,o;if(wt){let n=s[xt].fetchRegister(ye)-i.size;[a,r]=e(s[Bt],i,i.isMachine),q.log(`${n}. ${t(a,r)}`);let o=[];for(let e in r)o.push(e,"=",r[e]);q.log(...o)}return vt&&(o=s.fetchValue(ke)),n(s.fetchValue(ke)),{sp:o,pc:s.fetchValue(ye),name:a,params:r,type:i.type,isMachine:i.isMachine,size:i.size,state:void 0}}debugAfter(e,n){let{sp:i,type:r,isMachine:a,pc:o}=n;if(vt){let l=s(r,a),c=e.fetchValue(ke)-i;if(l&&l.check&&"number"==typeof l.stackChange&&l.stackChange!==c)throw new Error(`Error in ${n.name}:\n\n${o}. ${t(n.name,n.params)}\n\nStack changed by ${c}, expected ${l.stackChange}`);wt&&(q.log("%c -> pc: %d, ra: %d, fp: %d, sp: %d, s0: %O, s1: %O, t0: %O, t1: %O, v0: %O","color: orange",e[xt].registers[ye],e[xt].registers[ve],e[xt].registers[we],e[xt].registers[ke],e.s0,e.s1,e.t0,e.t1,e.v0),q.log("%c -> eval stack","color: red",e.stack.toArray()),q.log("%c -> block stack","color: magenta",e.elements().debugBlocks()),q.log("%c -> destructor stack","color: violet",e[Ct].toArray()),null===e[Nt].scope.current?q.log("%c -> scope","color: green","null"):q.log("%c -> scope","color: green",e.scope().slots.map((e=>function(e){return null!==e&&!Array.isArray(e)}(e)?T(e):e))),q.log("%c -> elements","color: blue",e.elements()[mn].current.element),q.log("%c -> constructing","color: aqua",e.elements().constructing))}}evaluate(e,t,n){let s=j(this.evaluateOpcode[n]);s.syscall?(J(!t.isMachine,`BUG: Mismatch between operation.syscall (${s.syscall}) and opcode.isMachine (${t.isMachine}) for ${t.type}`),s.evaluate(e,t)):(J(t.isMachine,`BUG: Mismatch between operation.syscall (${s.syscall}) and opcode.isMachine (${t.isMachine}) for ${t.type}`),s.evaluate(e[xt],t))}},Sn=Symbol("TYPE"),En=Symbol("INNER"),xn=Symbol("OWNER"),Cn=Symbol("ARGS"),Nn=Symbol("RESOLVED"),Tn=new WeakSet;function _n(e){return Tn.has(e)}function Bn(e,t){return _n(e)&&e[Sn]===t}class An{[Sn];[En];[xn];[Cn];[Nn];constructor(e,t,n,s,i=!1){Tn.add(this),this[Sn]=e,this[En]=t,this[xn]=n,this[Cn]=s,this[Nn]=i}}function Mn(e){let t,n,s,i,r,a=e;for(;;){let{[Cn]:e,[En]:o}=a;if(null!==e){let{named:s,positional:i}=e;i.length>0&&(t=void 0===t?i:i.concat(t)),void 0===n&&(n=[]),n.unshift(s)}if(!_n(o)){s=o,i=a[xn],r=a[Nn];break}a=o}return{definition:s,owner:i,resolved:r,positional:t,named:n}}function Rn(e,t,n,s,i=!1){return new An(e,t,n,s,i)}function On(e){return"getDebugCustomRenderTree"in e}wn.add(be.ChildScope,(e=>e.pushChildScope())),wn.add(be.PopScope,(e=>e.popScope())),wn.add(be.PushDynamicScope,(e=>e.pushDynamicScope())),wn.add(be.PopDynamicScope,(e=>e.popDynamicScope())),wn.add(be.Constant,((e,{op1:t})=>{e.stack.push(e[Bt].getValue(X(t)))})),wn.add(be.ConstantReference,((e,{op1:t})=>{e.stack.push(B(e[Bt].getValue(X(t)),!1))})),wn.add(be.Primitive,((e,{op1:t})=>{let n=e.stack;if(Q(t)){let s=e[Bt].getValue(X(t));n.push(s)}else n.push(Z(t))})),wn.add(be.PrimitiveReference,(e=>{let t,n=e.stack,s=i(n.pop(),r);t=void 0===s?N:null===s?R:!0===s?O:!1===s?L:A(s),n.push(t)})),wn.add(be.Dup,((e,{op1:t,op2:n})=>{let s=i(e.fetchValue(t),a)-n;e.stack.dup(s)})),wn.add(be.Pop,((e,{op1:t})=>{e.stack.pop(t)})),wn.add(be.Load,((e,{op1:t})=>{e.load(t)})),wn.add(be.Fetch,((e,{op1:t})=>{e.fetch(t)})),wn.add(be.BindDynamicScope,((e,{op1:t})=>{let n=e[Bt].getArray(t);e.bindDynamicScope(n)})),wn.add(be.Enter,((e,{op1:t})=>{e.enter(t)})),wn.add(be.Exit,(e=>{e.exit()})),wn.add(be.PushSymbolTable,((e,{op1:t})=>{e.stack.push(e[Bt].getValue(t))})),wn.add(be.PushBlockScope,(e=>{e.stack.push(e.scope())})),wn.add(be.CompileBlock,(e=>{let t=e.stack,n=t.pop();n?t.push(e.compile(n)):t.push(null)})),wn.add(be.InvokeYield,(e=>{let{stack:t}=e,n=i(t.pop(),o(l)),s=i(t.pop(),o(ss)),r=i(t.pop(),o(c));J(null===r||r&&"object"==typeof r&&Array.isArray(r.parameters),`Expected top of stack to be ${"Option<BlockSymbolTable>"}, was ${String(r)}`);let a=i(t.pop(),u(ms));if(null===r)return e.pushFrame(),void e.pushScope(s??e.scope());let p=F(s,"BUG: expected scope");{let e=r.parameters,t=e.length;if(t>0){p=p.child();for(let n=0;n<t;n++)p.bindSymbol(j(e[n]),a.at(n))}}e.pushFrame(),e.pushScope(p),e.call(n)})),wn.add(be.JumpIf,((e,{op1:t})=>{let n=i(e.stack.pop(),Xn),s=Boolean(T(n));M(n)?!0===s&&e.goto(t):(!0===s&&e.goto(t),e.updateWith(new Ln(n)))})),wn.add(be.JumpUnless,((e,{op1:t})=>{let n=i(e.stack.pop(),Xn),s=Boolean(T(n));M(n)?!1===s&&e.goto(t):(!1===s&&e.goto(t),e.updateWith(new Ln(n)))})),wn.add(be.JumpEq,((e,{op1:t,op2:n})=>{i(e.stack.peek(),a)===n&&e.goto(t)})),wn.add(be.AssertSame,(e=>{let t=i(e.stack.peek(),Xn);!1===M(t)&&e.updateWith(new Ln(t))})),wn.add(be.ToBoolean,(e=>{let{stack:t}=e,n=i(t.pop(),Xn);t.push(_((()=>Ge(T(n)))))}));class Ln{last;constructor(e){this.ref=e,this.last=T(e)}evaluate(e){let{last:t,ref:n}=this;t!==T(n)&&e.throw()}}class Dn{last;constructor(e,t){this.ref=e,this.filter=t,this.last=t(T(e))}evaluate(e){let{last:t,ref:n,filter:s}=this;t!==s(T(n))&&e.throw()}}class Vn{tag=it;lastRevision=rt;target;finalize(e,t){this.target=t,this.didModify(e)}evaluate(e){let{tag:t,target:n,lastRevision:s}=this;!e.alwaysRevalidate&&at(t,s)&&(ot(t),e.goto(F(n,"VM BUG: Target must be set before attempting to jump")))}didModify(e){this.tag=e,this.lastRevision=lt(this.tag),ot(e)}}class Un{constructor(e){this.debugLabel=e}evaluate(){nt(this.debugLabel)}}class In{constructor(e){this.target=e}evaluate(){let e=st();this.target.didModify(e)}}wn.add(be.Text,((e,{op1:t})=>{e.elements().appendText(e[Bt].getValue(t))})),wn.add(be.Comment,((e,{op1:t})=>{e.elements().appendComment(e[Bt].getValue(t))})),wn.add(be.OpenElement,((e,{op1:t})=>{e.elements().openElement(e[Bt].getValue(t))})),wn.add(be.OpenDynamicElement,(e=>{let t=i(T(i(e.stack.pop(),Xn)),p);e.elements().openElement(t)})),wn.add(be.PushRemoteElement,(e=>{let t=i(e.stack.pop(),Xn),n=i(e.stack.pop(),Xn),s=i(e.stack.pop(),Xn),r=i(T(t),d),a=i(T(n),h(o(m))),l=T(s);M(t)||e.updateWith(new Ln(t)),void 0===a||M(n)||e.updateWith(new Ln(n));let c=e.elements().pushRemoteElement(r,l,a);c&&e.associateDestroyable(c)})),wn.add(be.PopRemoteElement,(e=>{e.elements().popRemoteElement()})),wn.add(be.FlushElement,(e=>{let t=i(e.fetchValue(Ee),Kn),n=null;t&&(n=t.flush(e),e.loadValue(Ee,null)),e.elements().flushElement(n)})),wn.add(be.CloseElement,(e=>{let t=e.elements().closeElement();null!==t&&t.forEach((t=>{e.env.scheduleInstallModifier(t);const n=t.manager.getDestroyable(t.state);null!==n&&e.associateDestroyable(n)}))})),wn.add(be.Modifier,((e,{op1:t})=>{if(!1===e.env.isInteractive)return;let n=e.getOwner(),s=i(e.stack.pop(),Zn),r=e[Bt].getValue(t),{manager:a}=r,{constructing:o}=e.elements(),l=a.create(n,F(o,"BUG: ElementModifier could not find the element it applies to"),r.state,s.capture()),c={manager:a,state:l,definition:r};F(i(e.fetchValue(Ee),Kn),"BUG: ElementModifier could not find operations to append to").addModifier(c);let u=a.getTag(l);return null!==u?(ot(u),e.updateWith(new $n(u,c))):void 0})),wn.add(be.DynamicModifier,(e=>{if(!1===e.env.isInteractive)return;let{stack:t}=e,n=i(t.pop(),Xn),s=i(t.pop(),Zn).capture(),{constructing:r}=e.elements(),a=e.getOwner(),o=_((()=>{let e,t,i=T(n);if(!K(i))return;if(Bn(i,Se.Modifier)){let{definition:n,owner:r,positional:a,named:o}=Mn(i);t=n,e=r,void 0!==a&&(s.positional=a.concat(s.positional)),void 0!==o&&(s.named=P({},...o,s.named))}else t=i,e=a;let o=We(t,!0);if(null===o)throw new Error(`Expected a dynamic modifier definition, but received an object or function that did not have a modifier manager associated with it. The dynamic invocation was \`{{${n.debugLabel}}}\`, and the incorrect definition is the value at the path \`${n.debugLabel}\`, which was: ${ee(t)}`);let l={resolvedName:null,manager:o,state:t},c=o.create(e,F(r,"BUG: ElementModifier could not find the element it applies to"),l.state,s);return{manager:o,state:c,definition:l}})),l=T(o),c=null;if(void 0!==l){F(i(e.fetchValue(Ee),Kn),"BUG: ElementModifier could not find operations to append to").addModifier(l),c=l.manager.getTag(l.state),null!==c&&ot(c)}return!M(n)||c?e.updateWith(new Hn(c,l,o)):void 0}));class $n{lastUpdated;constructor(e,t){this.tag=e,this.modifier=t,this.lastUpdated=lt(e)}evaluate(e){let{modifier:t,tag:n,lastUpdated:s}=this;ot(n),at(n,s)||(e.env.scheduleUpdateModifier(t),this.lastUpdated=lt(n))}}class Hn{lastUpdated;constructor(e,t,n){this.tag=e,this.instance=t,this.instanceRef=n,this.lastUpdated=lt(e??ct)}evaluate(e){let{tag:t,lastUpdated:n,instance:s,instanceRef:i}=this,r=T(i);if(r!==s){if(void 0!==s){let e=s.manager.getDestroyable(s.state);null!==e&&Le(e)}if(void 0!==r){let{manager:n,state:s}=r,i=n.getDestroyable(s);null!==i&&De(this,i),t=n.getTag(s),null!==t&&(this.lastUpdated=lt(t)),this.tag=t,e.env.scheduleInstallModifier(r)}this.instance=r}else null===t||at(t,n)||(e.env.scheduleUpdateModifier(s),this.lastUpdated=lt(t));null!==t&&ot(t)}}wn.add(be.StaticAttr,((e,{op1:t,op2:n,op3:s})=>{let i=e[Bt].getValue(t),r=e[Bt].getValue(n),a=s?e[Bt].getValue(s):null;e.elements().setStaticAttribute(i,r,a)})),wn.add(be.DynamicAttr,((e,{op1:t,op2:n,op3:s})=>{let r=e[Bt].getValue(t),a=e[Bt].getValue(n),o=i(e.stack.pop(),Xn),l=T(o),c=s?e[Bt].getValue(s):null,u=e.elements().setDynamicAttribute(r,l,a,c);M(o)||e.updateWith(new Gn(o,u,e.env))}));class Gn{updateRef;constructor(e,t,n){let s=!1;this.updateRef=_((()=>{let i=T(e);!0===s?t.update(i,n):s=!0})),T(this.updateRef)}evaluate(){T(this.updateRef)}}wn.add(be.PushComponentDefinition,((e,{op1:t})=>{let n=e[Bt].getValue(t);J(!!n,`Missing component for ${t}`);let{manager:s,capabilities:i}=n,r={definition:n,manager:s,capabilities:i,state:null,handle:null,table:null,lookup:null};e.stack.push(r)})),wn.add(be.ResolveDynamicComponent,((e,{op1:t})=>{let n,s=e.stack,r=i(T(i(s.pop(),Xn)),f(p,os)),a=e[Bt],o=e.getOwner(),l=a.getValue(t);if(e.loadValue(xe,null),"string"==typeof r){if(l)throw new Error(`Attempted to resolve a dynamic component with a string definition, \`${r}\` in a strict mode template. In strict mode, using strings to resolve component definitions is prohibited. You can instead import the component definition and use it directly.`);let t=function(e,t,n,s){let i=e.lookupComponent(n,F(s,"BUG: expected owner when looking up component"));if(!i)throw new Error(`Attempted to resolve \`${n}\`, which was expected to be a component, but nothing was found.`);return t.resolvedComponent(i,n)}(e.runtime.resolver,a,r,o);n=F(t,`Could not find a component named "${r}"`)}else n=_n(r)?r:a.component(r,o);s.push(n)})),wn.add(be.ResolveCurriedComponent,(e=>{let t,n=e.stack,s=i(n.pop(),Xn),r=T(s),a=e[Bt];if("function"!=typeof r&&("object"!=typeof r||null===r))throw new Error(`Expected a component definition, but received ${r}. You may have accidentally done <${s.debugLabel}>, where "${s.debugLabel}" was a string instead of a curried component definition. You must either use the component definition directly, or use the {{component}} helper to create a curried component definition when invoking dynamically.`);if(_n(r))t=r;else if(t=a.component(r,e.getOwner(),!0),null===t)throw new Error(`Expected a dynamic component definition, but received an object or function that did not have a component manager associated with it. The dynamic invocation was \`<${s.debugLabel}>\` or \`{{${s.debugLabel}}}\`, and the incorrect definition is the value at the path \`${s.debugLabel}\`, which was: ${ee(r)}`);n.push(t)})),wn.add(be.PushDynamicComponentInstance,(e=>{let t,n,{stack:s}=e,i=s.pop();_n(i)?n=t=null:(n=i.manager,t=i.capabilities),s.push({definition:i,capabilities:t,manager:n,state:null,handle:null,table:null})})),wn.add(be.PushArgs,((e,{op1:t,op2:n,op3:s})=>{let i=e.stack,r=e[Bt].getArray(t),a=s>>4,o=8&s,l=7&s?e[Bt].getArray(n):te;e[At].setup(i,r,l,a,!!o),i.push(e[At])})),wn.add(be.PushEmptyArgs,(e=>{let{stack:t}=e;t.push(e[At].empty(t))})),wn.add(be.CaptureArgs,(e=>{let t=e.stack,n=i(t.pop(),u(ms)).capture();t.push(n)})),wn.add(be.PrepareArgs,((e,{op1:t})=>{let n=e.stack,s=e.fetchValue(t),r=i(n.pop(),u(ms)),{definition:a}=s;if(Bn(a,Se.Component)){J(!a.manager,"If the component definition was curried, we don't yet have a manager");let t=e[Bt],{definition:n,owner:i,resolved:o,positional:l,named:c}=Mn(a);if(!0===o)a=n;else if("string"==typeof n){let s=e.runtime.resolver.lookupComponent(n,i);a=t.resolvedComponent(F(s,"BUG: expected resolved component"),n)}else a=t.component(n,i);void 0!==c&&r.named.merge(P({},...c)),void 0!==l&&(r.realloc(l.length),r.positional.prepend(l));let{manager:u}=a;J(null===s.manager,"component instance manager should not be populated yet"),J(null===s.capabilities,"component instance manager should not be populated yet"),s.definition=a,s.manager=u,s.capabilities=a.capabilities,e.loadValue(xe,i)}let{manager:o,state:l}=a,c=s.capabilities;if(!Ye(o,c,Ce.prepareArgs))return void n.push(r);let p=r.blocks.values,d=r.blocks.names,h=o.prepareArgs(l,r);if(h){r.clear();for(let e=0;e<p.length;e++)n.push(p[e]);let{positional:e,named:t}=h,s=e.length;for(let t=0;t<s;t++)n.push(e[t]);let i=Object.keys(t);for(let e=0;e<i.length;e++)n.push(t[j(i[e])]);r.setup(n,i,d,s,!1)}n.push(r)})),wn.add(be.CreateComponent,((e,{op1:t,op2:n})=>{let s=i(e.fetchValue(n),as),{definition:r,manager:a,capabilities:o}=s;if(!Ye(a,o,Ce.createInstance))return;let l=null;Ye(a,o,Ce.dynamicScope)&&(l=e.dynamicScope());let c=1&t,u=null;Ye(a,o,Ce.createArgs)&&(u=i(e.stack.peek(),Zn));let p=null;Ye(a,o,Ce.createCaller)&&(p=e.getSelf());let d=a.create(e.getOwner(),r.state,u,e.env,l,p,!!c);s.state=d,Ye(a,o,Ce.updateHook)&&e.updateWith(new Wn(d,a,l))})),wn.add(be.RegisterComponentDestructor,((e,{op1:t})=>{let{manager:n,state:s,capabilities:r}=i(e.fetchValue(t),as),a=n.getDestroyable(s);if(!Ye(n,r,Ce.willDestroy)&&null!==a&&"string"in a)throw new Error("BUG: Destructor has willDestroy, but the willDestroy capability was not enabled for this component. Pre-destruction hooks must be explicitly opted into");a&&e.associateDestroyable(a)})),wn.add(be.BeginComponentTransaction,((e,{op1:t})=>{let n;{let{definition:s,manager:r}=i(e.fetchValue(t),as);n=s.resolvedName??r.getDebugName(s.state)}e.beginCacheGroup(n),e.elements().pushSimpleBlock()})),wn.add(be.PutComponentOperations,(e=>{e.loadValue(Ee,new Pn)})),wn.add(be.ComponentAttr,((e,{op1:t,op2:n,op3:s})=>{let r=e[Bt].getValue(t),a=e[Bt].getValue(n),o=i(e.stack.pop(),Xn),l=s?e[Bt].getValue(s):null;i(e.fetchValue(Ee),u(Pn)).setAttribute(r,o,a,l)})),wn.add(be.StaticComponentAttr,((e,{op1:t,op2:n,op3:s})=>{let r=e[Bt].getValue(t),a=e[Bt].getValue(n),o=s?e[Bt].getValue(s):null;i(e.fetchValue(Ee),u(Pn)).setStaticAttribute(r,a,o)}));class Pn{attributes=ne();classes=[];modifiers=[];setAttribute(e,t,n,s){let i={value:t,namespace:s,trusting:n};"class"===e&&this.classes.push(t),this.attributes[e]=i}setStaticAttribute(e,t,n){let s={value:t,namespace:n};"class"===e&&this.classes.push(t),this.attributes[e]=s}addModifier(e){this.modifiers.push(e)}flush(e){let t,n=this.attributes;for(let s in this.attributes){if("type"===s){t=n[s];continue}let i=j(this.attributes[s]);"class"===s?Fn(e,"class",jn(this.classes),i.namespace,i.trusting):Fn(e,s,i.value,i.namespace,i.trusting)}return void 0!==t&&Fn(e,"type",t.value,t.namespace,t.trusting),this.modifiers}}function jn(e){return 0===e.length?"":1===e.length?j(e[0]):function(e){return e.every((e=>"string"==typeof e))}(e)?e.join(" "):(t=e,_((()=>{let e=[];for(const n of t){let t=Dt("string"==typeof n?n:T(n));t&&e.push(t)}return 0===e.length?null:e.join(" ")})));var t}function Fn(e,t,n,s,i=!1){if("string"==typeof n)e.elements().setStaticAttribute(t,n,s);else{let r=e.elements().setDynamicAttribute(t,T(n),i,s);M(n)||e.updateWith(new Gn(n,r,e.env))}}function zn(e,t,n,s,i){let r=n.table.symbols.indexOf(e),a=s.get(t);-1!==r&&i.scope().bindBlock(r+1,a),n.lookup&&(n.lookup[e]=a)}wn.add(be.DidCreateElement,((e,{op1:t})=>{let{definition:n,state:s}=i(e.fetchValue(t),as),{manager:r}=n,a=i(e.fetchValue(Ee),u(Pn));r.didCreateElement(s,F(e.elements().constructing,"Expected a constructing element in DidCreateOpcode"),a)})),wn.add(be.GetComponentSelf,((e,{op1:t,op2:n})=>{let s=i(e.fetchValue(t),as),{definition:r,state:a}=s,{manager:o}=r,l=o.getSelf(a);if(void 0!==e.env.debugRenderTree){let s,r,o=i(e.fetchValue(t),as),{definition:c,manager:u}=o;if(e.stack.peek()===e[At])s=e[At].capture();else{let t=e[Bt].getArray(n);e[At].setup(e.stack,t,[],0,!0),s=e[At].capture()}let p=c.compilable;if(null===p?(J(Ye(u,o.capabilities,Ce.dynamicLayout),"BUG: No template was found for this component, and the component did not have the dynamic layout capability"),p=u.getDynamicLayout(a,e.runtime.resolver),r=null!==p?p.moduleName:"__default__.hbs"):r=p.moduleName,e.associateDestroyable(o),On(u)){u.getDebugCustomRenderTree(o.definition.state,o.state,s,r).forEach((t=>{let{bucket:n}=t;e.env.debugRenderTree.create(n,t),Oe(o,(()=>{e.env.debugRenderTree?.willDestroy(n)})),e.updateWith(new Jn(n))}))}else{let t=c.resolvedName??u.getDebugName(c.state);e.env.debugRenderTree.create(o,{type:"component",name:t,args:s,template:r,instance:T(l)}),e.associateDestroyable(o),Oe(o,(()=>{e.env.debugRenderTree?.willDestroy(o)})),e.updateWith(new Jn(o))}}e.stack.push(l)})),wn.add(be.GetComponentTagName,((e,{op1:t})=>{let{definition:n,state:s}=i(e.fetchValue(t),as),{manager:r}=n,a=r.getTagName(s);e.stack.push(a)})),wn.add(be.GetComponentLayout,((e,{op1:t})=>{let n=i(e.fetchValue(t),as),{manager:s,definition:r}=n,{stack:a}=e,{compilable:o}=r;if(null===o){let{capabilities:t}=n;J(Ye(s,t,Ce.dynamicLayout),"BUG: No template was found for this component, and the component did not have the dynamic layout capability"),o=s.getDynamicLayout(n.state,e.runtime.resolver),null===o&&(o=Ye(s,t,Ce.wrapped)?se(e[Bt].defaultTemplate).asWrappedLayout():se(e[Bt].defaultTemplate).asLayout())}let l=o.compile(e.context);a.push(o.symbolTable),a.push(l)})),wn.add(be.Main,((e,{op1:t})=>{let n=i(e.stack.pop(),hs),s=i(e.stack.pop(),ls),{manager:r,capabilities:a}=n,o={definition:n,manager:r,capabilities:a,state:null,handle:s.handle,table:s.symbolTable,lookup:null};e.loadValue(t,o)})),wn.add(be.PopulateLayout,((e,{op1:t})=>{let{stack:n}=e,s=i(n.pop(),l),r=i(n.pop(),g),a=i(e.fetchValue(t),as);a.handle=s,a.table=r})),wn.add(be.VirtualRootScope,((e,{op1:t})=>{let n,{table:s,manager:r,capabilities:a,state:o}=i(e.fetchValue(t),cs);Ye(r,a,Ce.hasSubOwner)?(n=r.getOwner(o),e.loadValue(xe,null)):(n=e.fetchValue(xe),null===n?n=e.getOwner():e.loadValue(xe,null)),e.pushRootScope(s.symbols.length+1,n)})),wn.add(be.SetupForEval,((e,{op1:t})=>{let n=i(e.fetchValue(t),cs);if(n.table.hasEval){let t=n.lookup=ne();e.scope().bindEvalScope(t)}})),wn.add(be.SetNamedVariables,((e,{op1:t})=>{let n=i(e.fetchValue(t),cs),s=e.scope(),r=i(e.stack.peek(),Zn),a=r.named.atNames;for(let e=a.length-1;e>=0;e--){let t=j(a[e]),i=n.table.symbols.indexOf(t),o=r.named.get(t,!0);-1!==i&&s.bindSymbol(i+1,o),n.lookup&&(n.lookup[t]=o)}})),wn.add(be.SetBlocks,((e,{op1:t})=>{let n=i(e.fetchValue(t),cs),{blocks:s}=i(e.stack.peek(),Zn);for(const[t]of ie(s.names))zn(j(s.symbolNames[t]),j(s.names[t]),n,s,e)})),wn.add(be.InvokeComponentLayout,((e,{op1:t})=>{let n=i(e.fetchValue(t),cs);e.call(n.handle)})),wn.add(be.DidRenderLayout,((e,{op1:t})=>{let n=i(e.fetchValue(t),as),{manager:s,state:r,capabilities:a}=n,o=e.elements().popBlock();if(void 0!==e.env.debugRenderTree)if(On(s)){s.getDebugCustomRenderTree(n.definition.state,r,_s).reverse().forEach((t=>{let{bucket:n}=t;e.env.debugRenderTree.didRender(n,o),e.updateWith(new qn(n,o))}))}else e.env.debugRenderTree.didRender(n,o),e.updateWith(new qn(n,o));if(Ye(s,a,Ce.createInstance)){i(s,b({didRenderLayout:y})).didRenderLayout(r,o),e.env.didCreate(n),e.updateWith(new Yn(n,o))}})),wn.add(be.CommitComponentTransaction,(e=>{e.commitCacheGroup()}));class Wn{constructor(e,t,n){this.component=e,this.manager=t,this.dynamicScope=n}evaluate(e){let{component:t,manager:n,dynamicScope:s}=this;n.update(t,s)}}class Yn{constructor(e,t){this.component=e,this.bounds=t}evaluate(e){let{component:t,bounds:n}=this,{manager:s,state:i}=t;s.didUpdateLayout(i,n),e.env.didUpdate(t)}}class Jn{constructor(e){this.bucket=e}evaluate(e){e.env.debugRenderTree?.update(this.bucket)}}class qn{constructor(e,t){this.bucket=e,this.bounds=t}evaluate(e){e.env.debugRenderTree?.didRender(this.bucket,this.bounds)}}b({[ut]:y});const Kn=k((()=>o(u(Pn))));const Xn=new class{validate(e){return"object"==typeof e&&null!==e&&D in e}expected(){return"Reference"}},Qn=b({next:y,isEmpty:y}),Zn=k((()=>u(ms))),es=y;const ts=new class{validate(e){return e===N}expected(){return"undefined"}},ns=b({positional:k((()=>v(Xn))),named:k((()=>w(Xn)))}),ss=k((()=>u(Et))),is=b({getCapabilities:y}),rs=a,as=b({definition:S,state:S,handle:S,table:S}),os=f(E,y),ls=b({handle:a,symbolTable:g});b({setAttribute:y});const cs=b({definition:S,state:S,handle:l,table:g}),us=b({compile:y,symbolTable:c}),ps=b({compile:y,symbolTable:g}),ds=b({0:us,1:ss,2:c}),hs=b({resolvedName:o(p),handle:a,state:f(E,y),manager:is,capabilities:rs,compilable:ps});class ms{stack=null;positional=new gs;named=new bs;blocks=new vs;empty(e){let t=e[Tt][ke]+1;return this.named.empty(e,t),this.positional.empty(e,t),this.blocks.empty(e,t),this}setup(e,t,n,s,i){this.stack=e;let r=this.named,a=t.length,o=e[Tt][ke]-a+1;r.setup(e,o,a,t,i);let l=o-s;this.positional.setup(e,l,s);let c=this.blocks,u=n.length,p=l-3*u;c.setup(e,p,u,n)}get base(){return this.blocks.base}get length(){return this.positional.length+this.named.length+3*this.blocks.length}at(e){return this.positional.at(e)}realloc(e){let{stack:t}=this;if(e>0&&null!==t){let{positional:n,named:s}=this,i=n.base+e;for(let e=n.length+s.length-1;e>=0;e--)t.copy(e+n.base,e+i);n.base+=e,s.base+=e,t[Tt][ke]+=e}}capture(){let e=0===this.positional.length?Ts:this.positional.capture();return{named:0===this.named.length?Ns:this.named.capture(),positional:e}}clear(){let{stack:e,length:t}=this;t>0&&null!==e&&e.pop(t)}}const fs=re();class gs{base=0;length=0;stack=null;_references=null;empty(e,t){this.stack=e,this.base=t,this.length=0,this._references=fs}setup(e,t,n){this.stack=e,this.base=t,this.length=n,this._references=0===n?fs:null}at(e){let{base:t,length:n,stack:s}=this;return e<0||e>=n?N:i(s.get(e,t),Xn)}capture(){return this.references}prepend(e){let t=e.length;if(t>0){let{base:n,length:s,stack:i}=this;this.base=n-=t,this.length=s+t;for(let s=0;s<t;s++)i.set(e[s],s,n);this._references=null}}get references(){let e=this._references;if(!e){let{stack:t,base:n,length:s}=this;e=this._references=t.slice(n,n+s)}return e}}class bs{base=0;length=0;_references=null;_names=te;_atNames=te;empty(e,t){this.stack=e,this.base=t,this.length=0,this._references=fs,this._names=te,this._atNames=te}setup(e,t,n,s,i){this.stack=e,this.base=t,this.length=n,0===n?(this._references=fs,this._names=te,this._atNames=te):(this._references=null,i?(this._names=null,this._atNames=s):(this._names=s,this._atNames=null))}get names(){let e=this._names;return e||(e=this._names=this._atNames.map(this.toSyntheticName)),e}get atNames(){let e=this._atNames;return e||(e=this._atNames=this._names.map(this.toAtName)),e}has(e){return-1!==this.names.indexOf(e)}get(e,t=!1){let{base:n,stack:s}=this,i=(t?this.atNames:this.names).indexOf(e);if(-1===i)return N;let r=s.get(i,n);return V(t?e:`@${e}`,r)}capture(){let{names:e,references:t}=this,n=ne();for(const[s,i]of ie(e))n[i]=V(`@${i}`,j(t[s]));return n}merge(e){let t=Object.keys(e);if(t.length>0){let{names:n,length:s,stack:i}=this,r=n.slice();for(const n of t){-1===r.indexOf(n)&&(s=r.push(n),i.push(e[n]))}this.length=s,this._references=null,this._names=r,this._atNames=null}}get references(){let e=this._references;if(!e){let{base:t,length:n,stack:s}=this;e=this._references=s.slice(t,t+n)}return e}toSyntheticName(e){return e.slice(1)}toAtName(e){return`@${e}`}}function ys(e){return`&${e}`}const ks=re();class vs{internalValues=null;_symbolNames=null;internalTag=null;names=te;length=0;base=0;empty(e,t){this.stack=e,this.names=te,this.base=t,this.length=0,this._symbolNames=null,this.internalTag=it,this.internalValues=ks}setup(e,t,n,s){this.stack=e,this.names=s,this.base=t,this.length=n,this._symbolNames=null,0===n?(this.internalTag=it,this.internalValues=ks):(this.internalTag=null,this.internalValues=null)}get values(){let e=this.internalValues;if(!e){let{base:t,length:n,stack:s}=this;e=this.internalValues=s.slice(t,t+3*n)}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);if(-1===t)return null;let{base:n,stack:s}=this,r=i(s.get(3*t,n),o(c)),a=i(s.get(3*t+1,n),o(ss)),u=i(s.get(3*t+2,n),o(f(l,us)));return null===u?null:[u,a,r]}capture(){return new ws(this.names,this.values)}get symbolNames(){let e=this._symbolNames;return null===e&&(e=this._symbolNames=this.names.map(ys)),e}}class ws{length;constructor(e,t){this.names=e,this.values=t,this.length=e.length}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);return-1===t?null:[this.values[3*t+2],this.values[3*t+1],this.values[3*t]]}}function Ss(e,t){return{named:e,positional:t}}function Es(e){let t=ne();for(const[n,s]of Object.entries(e))t[n]=T(s);return t}function xs(e){return e.map(T)}function Cs(e){return{named:Es(e.named),positional:xs(e.positional)}}const Ns=Object.freeze(Object.create(null)),Ts=fs,_s=Ss(Ns,Ts);function Bs(e){return"string"==typeof e?e:"function"!=typeof e.toString?"":String(e)}function As(e,t){let n,s=Je(e,!0);if(null===s?n=null:(n="function"==typeof s?s:s.getHelper(e),J(s,"BUG: expected manager or helper")),null===n)throw new Error(`Expected a dynamic helper definition, but received an object or function that did not have a helper manager associated with it. The dynamic invocation was \`{{${t.debugLabel}}}\` or \`(${t.debugLabel})\`, and the incorrect definition is the value at the path \`${t.debugLabel}\`, which was: ${ee(e)}`);return n}function Ms(e){return J(Array.isArray(e)||e===N,"a reference other than UNDEFINED_REFERENCE is illegal here"),e===N}wn.add(be.Curry,((e,{op1:t,op2:n})=>{let s=e.stack,r=i(s.pop(),Xn),a=i(s.pop(),ns),o=e.getOwner(),l=e.runtime.resolver,c=!1;c=e[Bt].getValue(X(n)),e.loadValue(Ne,function(e,t,n,s,i,r){let a,o;return _((()=>{let l=T(t);if(l===a)return o;if(Bn(l,e))o=s?Rn(e,l,n,s):s;else if(e===Se.Component&&"string"==typeof l&&l){if(r)throw new Error(`Attempted to resolve a dynamic component with a string definition, \`${l}\` in a strict mode template. In strict mode, using strings to resolve component definitions is prohibited. You can instead import the component definition and use it directly.`);if(!F(i,"BUG: expected resolver for curried component definitions").lookupComponent(l,n))throw new Error(`Attempted to resolve \`${l}\`, which was expected to be a component, but nothing was found.`);o=Rn(e,l,n,s)}else o=K(l)?Rn(e,l,n,s):null;return a=l,o}))}(t,r,o,a,l,c))})),wn.add(be.DynamicHelper,(e=>{let t,n=e.stack,s=i(n.pop(),Xn),r=i(n.pop(),Zn).capture(),a=e.getOwner(),o=_((()=>{void 0!==t&&Le(t);let e=T(s);if(Bn(e,Se.Helper)){let{definition:n,owner:i,positional:a,named:l}=Mn(e),c=As(n,s);void 0!==l&&(r.named=P({},...l,r.named)),void 0!==a&&(r.positional=a.concat(r.positional)),t=c(r,i),De(o,t)}else if(K(e)){let n=As(e,s);t=n(r,a),Ve(t)&&De(o,t)}else t=N})),l=_((()=>(T(o),T(t))));e.associateDestroyable(o),e.loadValue(Ne,l)})),wn.add(be.Helper,((e,{op1:t})=>{let n=e.stack,s=i(e[Bt].getValue(t),es)(i(n.pop(),Zn).capture(),e.getOwner(),e.dynamicScope());Ve(s)&&e.associateDestroyable(s),e.loadValue(Ne,s)})),wn.add(be.GetVariable,((e,{op1:t})=>{let n=e.referenceForSymbol(t);e.stack.push(n)})),wn.add(be.SetVariable,((e,{op1:t})=>{let n=i(e.stack.pop(),Xn);e.scope().bindSymbol(t,n)})),wn.add(be.SetBlock,((e,{op1:t})=>{let n=i(e.stack.pop(),us),s=i(e.stack.pop(),ss),r=i(e.stack.pop(),c);e.scope().bindBlock(t,[n,s,r])})),wn.add(be.ResolveMaybeLocal,((e,{op1:t})=>{let n=e[Bt].getValue(t),s=e.scope().getPartialMap()[n];void 0===s&&(s=U(e.getSelf(),n)),e.stack.push(s)})),wn.add(be.RootScope,((e,{op1:t})=>{e.pushRootScope(t,e.getOwner())})),wn.add(be.GetProperty,((e,{op1:t})=>{let n=e[Bt].getValue(t),s=i(e.stack.pop(),Xn);e.stack.push(U(s,n))})),wn.add(be.GetBlock,((e,{op1:t})=>{let{stack:n}=e,s=e.scope().getBlock(t);n.push(s)})),wn.add(be.SpreadBlock,(e=>{let{stack:t}=e,n=i(t.pop(),o(f(ds,ts)));if(n&&!Ms(n)){let[e,s,i]=n;t.push(i),t.push(s),t.push(e)}else t.push(null),t.push(null),t.push(null)})),wn.add(be.HasBlock,(e=>{let{stack:t}=e,n=i(t.pop(),o(f(ds,ts)));n&&!Ms(n)?t.push(O):t.push(L)})),wn.add(be.HasBlockParams,(e=>{let t=e.stack.pop(),n=e.stack.pop();i(t,h(f(l,us))),i(n,h(ss));let s=i(e.stack.pop(),h(c)),r=s&&s.parameters.length;e.stack.push(r?O:L)})),wn.add(be.Concat,((e,{op1:t})=>{let n=new Array(t);for(let s=t;s>0;s--){n[s-1]=i(e.stack.pop(),Xn)}var s;e.stack.push((s=n,_((()=>{const e=[];for(const t of s){const n=T(t);null!=n&&e.push(Bs(n))}return e.length>0?e.join(""):null}))))})),wn.add(be.IfInline,(e=>{let t=i(e.stack.pop(),Xn),n=i(e.stack.pop(),Xn),s=i(e.stack.pop(),Xn);e.stack.push(_((()=>!0===Ge(T(t))?T(n):T(s))))})),wn.add(be.Not,(e=>{let t=i(e.stack.pop(),Xn);e.stack.push(_((()=>!Ge(T(t)))))})),wn.add(be.GetDynamicVar,(e=>{let t=e.dynamicScope(),n=e.stack,s=i(n.pop(),Xn);n.push(_((()=>{let e=String(T(s));return T(t.get(e))})))})),wn.add(be.Log,(e=>{let{positional:t}=i(e.stack.pop(),Zn).capture();e.loadValue(Ne,_((()=>{console.log(...xs(t))})))}));class Rs{constructor(e,t,n){this.node=e,this.reference=t,this.lastValue=n}evaluate(){let e,t=T(this.reference),{lastValue:n}=this;if(t!==n&&(e=Vt(t)?"":$t(t)?t:String(t),e!==n)){this.node.nodeValue=this.lastValue=e}}}function Os(e){return function(e){return $t(e)||Vt(e)||"boolean"==typeof e||"number"==typeof e}(e)?Te.String:Bn(e,_e.Component)||qe(e)?Te.Component:Bn(e,_e.Helper)||Ke(e)?Te.Helper:Ut(e)?Te.SafeString:function(e){return It(e)&&11===e.nodeType}(e)?Te.Fragment:It(e)?Te.Node:Te.String}function Ls(e){if(!K(e))return Te.String;if(Bn(e,_e.Component)||qe(e))return Te.Component;if(!Bn(e,_e.Helper)&&!Ke(e))throw new Error(`Attempted use a dynamic value as a component or helper, but that value did not have an associated component or helper manager. The value was: ${e}`);return Te.Helper}function Ds(e,t){console.info("Use `context`, and `get(<path>)` to debug this template."),t("this")}wn.add(be.ContentType,(e=>{let t=i(e.stack.peek(),Xn);e.stack.push(Os(T(t))),M(t)||e.updateWith(new Dn(t,Os))})),wn.add(be.DynamicContentType,(e=>{let t=i(e.stack.peek(),Xn);e.stack.push(Ls(T(t))),M(t)||e.updateWith(new Dn(t,Ls))})),wn.add(be.AppendHTML,(e=>{let t=i(e.stack.pop(),Xn),n=T(t),s=Vt(n)?"":String(n);e.elements().appendDynamicHTML(s)})),wn.add(be.AppendSafeHTML,(e=>{let t=i(e.stack.pop(),Xn),n=i(T(t),x).toHTML(),s=Vt(n)?"":i(n,p);e.elements().appendDynamicHTML(s)})),wn.add(be.AppendText,(e=>{let t=i(e.stack.pop(),Xn),n=T(t),s=Vt(n)?"":String(n),r=e.elements().appendDynamicText(s);M(t)||e.updateWith(new Rs(r,t,s))})),wn.add(be.AppendDocumentFragment,(e=>{let t=i(e.stack.pop(),Xn),n=i(T(t),C);e.elements().appendDynamicFragment(n)})),wn.add(be.AppendNode,(e=>{let t=i(e.stack.pop(),Xn),n=i(T(t),m);e.elements().appendDynamicNode(n)}));let Vs=Ds;function Us(e){Vs=e}function Is(){Vs=Ds}class $s{locals=ne();constructor(e,t,n){this.scope=e;for(const s of n){let n=j(t[s-1]),i=e.getSymbol(s);this.locals[n]=i}}get(e){let t,{scope:n,locals:s}=this,i=e.split("."),[r,...a]=e.split("."),o=n.getEvalScope();return"this"===r?t=n.getSelf():s[r]?t=j(s[r]):0===r.indexOf("@")&&o[r]?t=o[r]:(t=this.scope.getSelf(),a=i),a.reduce(((e,t)=>U(e,t)),t)}}wn.add(be.Debugger,((e,{op1:t,op2:n})=>{let s=e[Bt].getArray(t),i=e[Bt].getArray(X(n)),r=new $s(e.scope(),s,i);Vs(T(e.getSelf()),(e=>T(r.get(e))))})),wn.add(be.EnterList,((e,{op1:t,op2:n})=>{let s=e.stack,r=i(s.pop(),Xn),a=i(s.pop(),Xn),o=T(a),l=null===o?"@identity":String(o),c=I(r,l),u=T(c);e.updateWith(new Dn(c,(e=>e.isEmpty()))),!0===u.isEmpty()?e.goto(n+1):(e.enterList(c,t),e.stack.push(u))})),wn.add(be.ExitList,(e=>{e.exitList()})),wn.add(be.Iterate,((e,{op1:t})=>{let n=e.stack,s=i(n.peek(),Qn).next();null!==s?e.registerItem(e.enterItem(s)):e.goto(t)}));const Hs={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,createCaller:!1,dynamicScope:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1,hasSubOwner:!1};class Gs{getCapabilities(){return Hs}getDebugName({name:e}){return e}getSelf(){return R}getDestroyable(){return null}}const Ps=new Gs;class js{constructor(e="@glimmer/component/template-only",t="(unknown template-only component)"){this.moduleName=e,this.name=t}toString(){return this.moduleName}}function Fs(e,t){return new js(e,t)}Xe(Ps,js.prototype);const zs={foreignObject:1,desc:1,title:1},Ws=Object.create(null);class Ys{constructor(e){this.document=e,this.setupUselessElement()}setupUselessElement(){this.uselessElement=this.document.createElement("div")}createElement(e,t){let n,s;if(t?(n=t.namespaceURI===z||"svg"===e,s=!!zs[t.tagName]):(n="svg"===e,s=!1),n&&!s){if(Ws[e])throw new Error(`Cannot create a ${e} inside an SVG context`);return this.document.createElementNS(z,e)}return this.document.createElement(e)}insertBefore(e,t,n){e.insertBefore(t,n)}insertHTMLBefore(e,t,n){if(""===n){const n=this.createComment("");return e.insertBefore(n,t),new Rt(e,n,n)}const s=t?t.previousSibling:e.lastChild;let i;if(null===t)e.insertAdjacentHTML(ae,n),i=F(e.lastChild,"bug in insertAdjacentHTML?");else if(t instanceof HTMLElement)t.insertAdjacentHTML("beforebegin",n),i=F(t.previousSibling,"bug in insertAdjacentHTML?");else{const{uselessElement:s}=this;e.insertBefore(s,t),s.insertAdjacentHTML(oe,n),i=F(s.previousSibling,"bug in insertAdjacentHTML?"),e.removeChild(s)}const r=F(s?s.nextSibling:e.firstChild,"bug in insertAdjacentHTML?");return new Rt(e,r,i)}createTextNode(e){return this.document.createTextNode(e)}createComment(e){return this.document.createComment(e)}}function Js(e,t,n){if(!e)return t;if(!function(e,t){const n=e.createElementNS(t,"svg");try{n.insertAdjacentHTML(ae,"<circle></circle>")}catch(e){}finally{return 1!==n.childNodes.length||W(j(n.firstChild),"SVG").namespaceURI!==z}}(e,n))return t;const s=e.createElement("div");return class extends t{insertHTMLBefore(e,t,i){return""===i||e.namespaceURI!==n?super.insertHTMLBefore(e,t,i):function(e,t,n,s){let i;if(J(""!==n,"html cannot be empty"),"FOREIGNOBJECT"===e.tagName.toUpperCase()){const e="<svg><foreignObject>"+n+"</foreignObject></svg>";le(t),t.insertAdjacentHTML(ce,e),i=t.firstChild.firstChild}else{const e="<svg>"+n+"</svg>";le(t),t.insertAdjacentHTML(ce,e),i=t.firstChild}return function(e,t,n){const s=F(e.firstChild,"source is empty");let i=s,r=s;for(;r;){const e=r.nextSibling;t.insertBefore(r,n),i=r,r=e}return new Rt(t,s,i)}(i,e,s)}(e,s,i,t)}}}function qs(e,t){return e&&function(e){const t=e.createElement("div");if(t.appendChild(e.createTextNode("first")),t.insertAdjacentHTML(ae,"second"),2===t.childNodes.length)return!1;return!0}(e)?class extends t{uselessComment;constructor(e){super(e),this.uselessComment=e.createComment("")}insertHTMLBefore(e,t,n){if(""===n)return super.insertHTMLBefore(e,t,n);let s=!1;const i=t?t.previousSibling:e.lastChild;i&&i instanceof Text&&(s=!0,e.insertBefore(this.uselessComment,t));const r=super.insertHTMLBefore(e,t,n);return s&&e.removeChild(this.uselessComment),r}}:t}const Ks="undefined"==typeof document?null:ue(document);let Xs=class extends Ys{createElementNS(e,t){return this.document.createElementNS(e,t)}setAttribute(e,t,n,s=null){s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}};Xs=qs(Ks,Xs),Xs=Js(Ks,Xs,z);const Qs=Xs;["b","big","blockquote","body","br","center","code","dd","div","dl","dt","em","embed","h1","h2","h3","h4","h5","h6","head","hr","i","img","li","listing","main","meta","nobr","ol","p","pre","ruby","s","small","span","strong","strike","sub","sup","table","tt","u","ul","var"].forEach((e=>Ws[e]=1));const Zs=/[\t\n\v\f\r \xA0\u{1680}\u{180e}\u{2000}-\u{200a}\u{2028}\u{2029}\u{202f}\u{205f}\u{3000}\u{feff}]/u,ei="undefined"==typeof document?null:ue(document);function ti(e){return Zs.test(e)}class ni extends Ys{namespace;constructor(e){super(e),this.document=e,this.namespace=null}setAttribute(e,t,n){e.setAttribute(t,n)}removeAttribute(e,t){e.removeAttribute(t)}insertAfter(e,t,n){this.insertBefore(e,t,n.nextSibling)}}let si=ni;si=qs(ei,si),si=Js(ei,si,z);const ii=si;let ri=0;class ai{id=ri++;value;constructor(e){this.value=e}get(){return this.value}release(){if(null===this.value)throw new Error("BUG: double release?");this.value=null}toString(){let e=`Ref ${this.id}`;if(null===this.value)return`${e} (released)`;try{return`${e}: ${this.value}`}catch{return e}}}class oi{stack=new Y;refs=new WeakMap;roots=new Set;nodes=new WeakMap;begin(){this.reset()}create(e,t){let n=P({},t,{bounds:null,refs:new Set});this.nodes.set(e,n),this.appendChild(n,e),this.enter(e)}update(e){this.enter(e)}didRender(e,t){if(this.stack.current!==e)throw new Error(`BUG: expecting ${this.stack.current}, got ${e}`);this.nodeFor(e).bounds=t,this.exit()}willDestroy(e){F(this.refs.get(e),"BUG: missing ref").release()}commit(){this.reset()}capture(){return this.captureRefs(this.roots)}reset(){if(0!==this.stack.size){let e=F(this.stack.toArray()[0],"expected root state when resetting render tree"),t=this.refs.get(e);for(void 0!==t&&this.roots.delete(t);!this.stack.isEmpty();)this.stack.pop()}}enter(e){this.stack.push(e)}exit(){if(0===this.stack.size)throw new Error("BUG: unbalanced pop");this.stack.pop()}nodeFor(e){return F(this.nodes.get(e),"BUG: missing node")}appendChild(e,t){if(this.refs.has(t))throw new Error("BUG: child already appended");let n=this.stack.current,s=new ai(t);if(this.refs.set(t,s),n){let t=this.nodeFor(n);t.refs.add(s),e.parent=t}else this.roots.add(s)}captureRefs(e){let t=[];return e.forEach((n=>{let s=n.get();s?t.push(this.captureNode(`render-node:${n.id}`,s)):e.delete(n)})),t}captureNode(e,t){let n=this.nodeFor(t),{type:s,name:i,args:r,instance:a,refs:o}=n,l=this.captureTemplate(n),c=this.captureBounds(n),u=this.captureRefs(o);return{id:e,type:s,name:i,args:Cs(r),instance:a,template:l,bounds:c,children:u}}captureTemplate({template:e}){return e||null}captureBounds(e){let t=F(e.bounds,"BUG: missing bounds");return{parentElement:t.parentElement(),firstNode:t.firstNode(),lastNode:t.lastNode()}}}const li=Symbol("TRANSACTION");class ci{scheduledInstallModifiers=[];scheduledUpdateModifiers=[];createdComponents=[];updatedComponents=[];didCreate(e){this.createdComponents.push(e)}didUpdate(e){this.updatedComponents.push(e)}scheduleInstallModifier(e){this.scheduledInstallModifiers.push(e)}scheduleUpdateModifier(e){this.scheduledUpdateModifiers.push(e)}commit(){let{createdComponents:e,updatedComponents:t}=this;for(const{manager:t,state:n}of e)t.didCreate(n);for(const{manager:e,state:n}of t)e.didUpdate(n);let{scheduledInstallModifiers:n,scheduledUpdateModifiers:s}=this;for(const{manager:e,state:t,definition:s}of n){let n=e.getTag(t);if(null!==n){let i=pt((()=>e.install(t)),`- While rendering:\n  (instance of a \`${s.resolvedName||e.getDebugName(s.state)}\` modifier)`);dt(n,i)}else e.install(t)}for(const{manager:e,state:t,definition:n}of s){let s=e.getTag(t);if(null!==s){let i=pt((()=>e.update(t)),`- While rendering:\n  (instance of a \`${n.resolvedName||e.getDebugName(n.state)}\` modifier)`);dt(s,i)}else e.update(t)}}}class ui{[li]=null;updateOperations;isInteractive;debugRenderTree;constructor(e,t){if(this.delegate=t,this.isInteractive=t.isInteractive,this.debugRenderTree=this.delegate.enableDebugTooling?new oi:void 0,e.appendOperations)this.appendOperations=e.appendOperations,this.updateOperations=e.updateOperations;else{if(!e.document)throw new Error("you must pass document or appendOperations to a new runtime");this.appendOperations=new Qs(e.document),this.updateOperations=new ni(e.document)}}getAppendOperations(){return this.appendOperations}getDOM(){return F(this.updateOperations,"Attempted to get DOM updateOperations, but they were not provided by the environment. You may be attempting to rerender in an environment which does not support rerendering, such as SSR.")}begin(){J(!this[li],"A glimmer transaction was begun, but one already exists. You may have a nested transaction, possibly caused by an earlier runtime exception while rendering. Please check your console for the stack trace of any prior exceptions."),this.debugRenderTree?.begin(),this[li]=new ci}get transaction(){return F(this[li],"must be in a transaction")}didCreate(e){this.transaction.didCreate(e)}didUpdate(e){this.transaction.didUpdate(e)}scheduleInstallModifier(e){this.isInteractive&&this.transaction.scheduleInstallModifier(e)}scheduleUpdateModifier(e){this.isInteractive&&this.transaction.scheduleUpdateModifier(e)}commit(){let e=this.transaction;this[li]=null,e.commit(),this.debugRenderTree?.commit(),this.delegate.onTransactionCommit()}}function pi(e,t,n,s){return{env:new ui(e,t),program:new yt(n.constants,n.heap),resolver:s}}function di(e,t){if(e[li])t();else{e.begin();try{t()}finally{e.commit()}}}function hi(e){return Qe(e,{})}const mi=hi((({positional:e})=>_((()=>xs(e)),null,"array"))),fi=e=>(e=>null==e||"function"!=typeof e.toString)(e)?"":String(e),gi=hi((({positional:e})=>_((()=>xs(e).map(fi).join("")),null,"concat"))),bi=pe("`fn` helper"),yi=hi((({positional:e})=>{let t=i(e[0],ki);return _((()=>(...n)=>{let[s,...i]=xs(e);if(ki(t),$(t)){let e=i.length>0?i[0]:n[0];return H(t,e)}return s.call(bi,...i,...n)}),null,"fn")}));function ki(e){if(!e||!$(e)&&"function"!=typeof T(e))throw new Error(`You must pass a function as the \`fn\` helper's first argument, you passed ${e?T(e):e}. While rendering:\n\n${e?.debugLabel}`)}const vi=hi((({positional:e})=>{let t=e[0]??N,n=e[1]??N;return _((()=>{let e=T(t);if(de(e))return Pe(e,String(T(n)))}),(e=>{let s=T(t);if(de(s))return je(s,String(T(n)),e)}),"get")}));let wi;wi=e=>new Proxy(e,{set:(e,t,n)=>(Fe(`You set the '${String(t)}' property on a {{hash}} object. Setting properties on objects generated by {{hash}} is deprecated. Please update to use an object created with a tracked property or getter, or with a custom helper.`,!1,{id:"setting-on-hash"}),e[t]=n,!0)});const Si=hi((({named:e})=>{let t=_((()=>{let t=Es(e);return t=wi(t),t}),null,"hash"),n=new Map;for(let t in e)n.set(t,e[t]);return t.children=n,t}));let Ei=new WeakMap;function xi(e){return mt(Ei.get(e))}class Ci{argsCache;constructor(e,t=(()=>_s)){let n=ht((()=>t(e)));Ei.set(this,n),Object.freeze(this)}get named(){return xi(this).named||Ns}get positional(){return xi(this).positional||Ts}}function Ni(e,t,n){if("object"!=typeof e||null===e)throw new Error(`Expected a context object to be passed as the first parameter to invokeHelper, got ${e}`);const s=kt(e),i=Je(t);if(!i)throw new Error(`Expected a helper definition to be passed as the second parameter to invokeHelper, but no helper manager was found. The definition value that was passed was \`${ee(t)}\`. Did you use setHelperManager to associate a helper manager with this value?`);if("function"==typeof i)throw new Error("Found a helper manager, but it was an internal built-in helper manager. `invokeHelper` does not support internal helpers yet.");const r=i.getDelegateFor(s);let a,o=new Ci(e,n),l=r.createHelper(t,o);if(!Ze(r))throw new Error("TODO: unreachable, to be implemented with hasScheduledEffect");if(a=ht((()=>{if(Ue(a)||Ie(a))throw new Error("You attempted to get the value of a helper after the helper was destroyed, which is not allowed");return r.getValue(l)})),De(e,a),et(r)){let e=r.getDestroyable(l);De(a,e)}return a}const Ti=pe("`on` modifier");class _i{tag=ft();element;args;once;passive;capture;options;shouldUpdate=!0;constructor(e,t){this.element=e,this.args=t}updateFromArgs(){let{args:e}=this,{once:t,passive:n,capture:s}=Es(e.named);t!==this.once&&(this.once=t,this.shouldUpdate=!0),n!==this.passive&&(this.passive=n,this.shouldUpdate=!0),s!==this.capture&&(this.capture=s,this.shouldUpdate=!0),this.options=void 0!==t||void 0!==n||void 0!==s?{once:t,passive:n,capture:s}:void 0;let r=F(e.positional[0],"You must pass a valid DOM event name as the first argument to the `on` modifier"),a=i(T(r),p,(()=>"You must pass a valid DOM event name as the first argument to the `on` modifier"));a!==this.eventName&&(this.eventName=a,this.shouldUpdate=!0);const o=F(e.positional[1],"You must pass a function as the second argument to the `on` modifier"),l=i(T(o),y,(e=>`You must pass a function as the second argument to the \`on\` modifier; you passed ${null===e?"null":typeof e}. While rendering:\n\n${o.debugLabel??"{unlabeled value}"}`));if(l!==this.userProvidedCallback&&(this.userProvidedCallback=l,this.shouldUpdate=!0),2!==e.positional.length)throw new Error(`You can only pass two positional arguments (event name and callback) to the \`on\` modifier, but you provided ${e.positional.length}. Consider using the \`fn\` helper to provide additional arguments to the \`on\` callback.`);let c=n;this.shouldUpdate&&(this.callback=c?function(e){return n&&(e.preventDefault=()=>{throw new Error(`You marked this listener as 'passive', meaning that you must not call 'event.preventDefault()': \n\n${l.name??"{anonymous function}"}`)}),l.call(Ti,e)}:l.bind(Ti))}}let Bi=0,Ai=0;function Mi(e,t,n,s){Ai++,e.removeEventListener(t,n,s)}function Ri(e,t,n,s){Bi++,e.addEventListener(t,n,s)}const Oi=tt(new class{getDebugName(){return"on"}get counters(){return{adds:Bi,removes:Ai}}create(e,t,n,s){return new _i(t,s)}getTag(e){return null===e?null:e.tag}install(e){if(null===e)return;e.updateFromArgs();let{element:t,eventName:n,callback:s,options:i}=e;Ri(t,n,s,i),Oe(e,(()=>Mi(t,n,s,i))),e.shouldUpdate=!1}update(e){if(null===e)return;let{element:t,eventName:n,callback:s,options:i}=e;e.updateFromArgs(),e.shouldUpdate&&(Mi(t,n,s,i),Ri(e.element,e.eventName,e.callback,e.options),e.shouldUpdate=!1)}getDestroyable(e){return e}},{});class Li{currentOpSize=0;constructor(e,t,n,s,i){this.stack=e,this.heap=t,this.program=n,this.externs=s,this.registers=i}fetchRegister(e){return this.registers[e]}loadRegister(e,t){this.registers[e]=t}setPc(e){J("number"==typeof e&&!isNaN(e),"pc is set to a number"),this.registers[ye]=e}pushFrame(){this.stack.push(this.registers[ve]),this.stack.push(this.registers[we]),this.registers[we]=this.registers[ke]-1}popFrame(){this.registers[ke]=this.registers[we]-1,this.registers[ve]=this.stack.get(0),this.registers[we]=this.stack.get(1)}pushSmallFrame(){this.stack.push(this.registers[ve])}popSmallFrame(){this.registers[ve]=this.stack.pop()}goto(e){this.setPc(this.target(e))}target(e){return this.registers[ye]+e-this.currentOpSize}call(e){J(e<4294967295,"Jumping to placeholder address"),this.registers[ve]=this.registers[ye],this.setPc(this.heap.getaddr(e))}returnTo(e){this.registers[ve]=this.target(e)}return(){this.setPc(this.registers[ve])}nextStatement(){let{registers:e,program:t}=this,n=e[ye];if(J("number"==typeof n,"pc is a number"),-1===n)return null;let s=t.opcode(n),i=this.currentOpSize=s.size;return this.registers[ye]+=i,s}evaluateOuter(e,t){if(vt){let{externs:{debugBefore:n,debugAfter:s}}=this,i=n(e);this.evaluateInner(e,t),s(i)}else this.evaluateInner(e,t)}evaluateInner(e,t){e.isMachine?this.evaluateMachine(e):this.evaluateSyscall(e,t)}evaluateMachine(e){switch(e.type){case Be.PushFrame:return this.pushFrame();case Be.PopFrame:return this.popFrame();case Be.InvokeStatic:return this.call(e.op1);case Be.InvokeVirtual:return this.call(this.stack.pop());case Be.Jump:return this.goto(e.op1);case Be.Return:return this.return();case Be.ReturnTo:return this.returnTo(e.op1)}}evaluateSyscall(e,t){wn.evaluate(t,e,e.type)}}class Di{env;dom;alwaysRevalidate;frameStack=new Y;constructor(e,{alwaysRevalidate:t=!1}){this.env=e,this.dom=e.getDOM(),this.alwaysRevalidate=t}execute(e,t){{let n=!0;try{gt.runInTrackingTransaction((()=>this._execute(e,t)),"- While rendering:"),n=!1}finally{n&&console.error(`\n\nError occurred:\n\n${bt()}\n\n`)}}}_execute(e,t){let{frameStack:n}=this;for(this.try(e,t);!n.isEmpty();){let e=this.frame.nextStatement();void 0!==e?e.evaluate(this):n.pop()}}get frame(){return F(this.frameStack.current,"bug: expected a frame")}goto(e){this.frame.goto(e)}try(e,t){this.frameStack.push(new Gi(e,t))}throw(){this.frame.handleException(),this.frameStack.pop()}}class Vi{constructor(e,t){this.state=e,this.resumeCallback=t}resume(e,t){return this.resumeCallback(e,this.state,t)}}class Ui{children;bounds;constructor(e,t,n,s){this.state=e,this.runtime=t,this.children=s,this.bounds=n}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}evaluate(e){e.try(this.children,null)}}class Ii extends Ui{type="try";evaluate(e){e.try(this.children,this)}handleException(){let{state:e,bounds:t,runtime:n}=this;$e(this);let s=fn.resume(n.env,t),i=e.resume(n,s),r=[],a=this.children=[],o=i.execute((e=>{e.pushUpdating(r),e.updateWith(this),e.pushUpdating(a)}));De(this,o.drop)}}class $i extends Ii{retained=!1;index=-1;constructor(e,t,n,s,i,r){super(e,t,n,[]),this.key=s,this.memo=i,this.value=r}updateReferences(e){this.retained=!0,H(this.value,e.value),H(this.memo,e.memo)}shouldRemove(){return!this.retained}reset(){this.retained=!1}}class Hi extends Ui{type="list-block";opcodeMap=new Map;marker=null;lastIterator;constructor(e,t,n,s,i){super(e,t,n,s),this.iterableRef=i,this.lastIterator=T(i)}initializeChild(e){e.index=this.children.length-1,this.opcodeMap.set(e.key,e)}evaluate(e){let t=T(this.iterableRef);if(this.lastIterator!==t){let{bounds:n}=this,{dom:s}=e,i=this.marker=s.createComment("");s.insertAfter(n.parentElement(),i,F(n.lastNode(),"can't insert after an empty bounds")),this.sync(t),this.parentElement().removeChild(i),this.marker=null,this.lastIterator=t}super.evaluate(e)}sync(e){let{opcodeMap:t,children:n}=this,s=0,i=0;for(this.children=this.bounds.boundList=[];;){let r=e.next();if(null===r)break;let a=n[s],{key:o}=r;for(;void 0!==a&&!0===a.retained;)a=n[++s];if(void 0!==a&&a.key===o)this.retainItem(a,r),s++;else if(t.has(o)){let e=t.get(o);if(e.index<i)this.moveItem(e,r,a);else{i=e.index;let t=!1;for(let e=s+1;e<i;e++)if(!1===j(n[e]).retained){t=!0;break}!1===t?(this.retainItem(e,r),s=i+1):(this.moveItem(e,r,a),s++)}}else this.insertItem(r,a)}for(const e of n)!1===e.retained?this.deleteItem(e):e.reset()}retainItem(e,t){vt&&he("list-updates",["retain",t.key]);let{children:n}=this;H(e.memo,t.memo),H(e.value,t.value),e.retained=!0,e.index=n.length,n.push(e)}insertItem(e,t){vt&&he("list-updates",["insert",e.key]);let{opcodeMap:n,bounds:s,state:i,runtime:r,children:a}=this,{key:o}=e,l=void 0===t?this.marker:t.firstNode(),c=fn.forInitialRender(r.env,{element:s.parentElement(),nextSibling:l});i.resume(r,c).execute((t=>{t.pushUpdating();let s=t.enterItem(e);s.index=a.length,a.push(s),n.set(o,s),De(this,s)}))}moveItem(e,t,n){let s,i,{children:r}=this;if(H(e.memo,t.memo),H(e.value,t.value),e.retained=!0,void 0===n?Ot(e,this.marker):(s=e.lastNode().nextSibling,i=n.firstNode(),s!==i&&Ot(e,i)),e.index=r.length,r.push(e),vt){he("list-updates",[s&&s===i?"move-retain":"move",t.key])}}deleteItem(e){vt&&he("list-updates",["delete",e.key]),Le(e),Lt(e),this.opcodeMap.delete(e.key)}}class Gi{current=0;constructor(e,t){this.ops=e,this.exceptionHandler=t}goto(e){this.current=e}nextStatement(){return this.ops[this.current++]}handleException(){this.exceptionHandler&&this.exceptionHandler.handleException()}}class Pi{constructor(e,t,n,s){this.env=e,this.updating=t,this.bounds=n,this.drop=s,De(this,s),Oe(this,(()=>Lt(this.bounds)))}rerender({alwaysRevalidate:e=!1}={alwaysRevalidate:!1}){let{env:t,updating:n}=this;new Di(t,{alwaysRevalidate:e}).execute(n,this)}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}handleException(){throw"this should never happen"}}class ji{static restore(e){return new this(e.slice(),[0,-1,e.length-1,0])}[Tt];constructor(e=[],t){this.stack=e,this[Tt]=t,vt&&Object.seal(this)}push(e){this.stack[++this[Tt][ke]]=e}dup(e=this[Tt][ke]){this.stack[++this[Tt][ke]]=this.stack[e]}copy(e,t){this.stack[t]=this.stack[e]}pop(e=1){let t=this.stack[this[Tt][ke]];return this[Tt][ke]-=e,t}peek(e=0){return this.stack[this[Tt][ke]-e]}get(e,t=this[Tt][we]){return this.stack[t+e]}set(e,t,n=this[Tt][we]){this.stack[n+t]=e}slice(e,t){return this.stack.slice(e,t)}capture(e){let t=this[Tt][ke]+1,n=t-e;return this.stack.slice(n,t)}reset(){this.stack.length=0}toArray(){return this.stack.slice(this[Tt][we],this[Tt][ke]+1)}}class Fi{scope=new Y;dynamicScope=new Y;updating=new Y;cache=new Y;list=new Y}class zi{[Nt]=new Fi;[_t];destructor;[Ct]=new Y;[Bt];[At];[xt];get stack(){return this[xt].stack}get pc(){return this[xt].fetchRegister(ye)}s0=null;s1=null;t0=null;t1=null;v0=null;fetch(e){let t=this.fetchValue(e);this.stack.push(t)}load(e){let t=this.stack.pop();this.loadValue(e,t)}fetchValue(e){if(Ae(e))return this[xt].fetchRegister(e);switch(e){case Re:return this.s0;case Me:return this.s1;case Ee:return this.t0;case xe:return this.t1;case Ne:return this.v0}}loadValue(e,t){switch(Ae(e)&&this[xt].loadRegister(e,t),e){case Re:this.s0=t;break;case Me:this.s1=t;break;case Ee:this.t0=t;break;case xe:this.t1=t;break;case Ne:this.v0=t}}pushFrame(){this[xt].pushFrame()}popFrame(){this[xt].popFrame()}goto(e){this[xt].goto(e)}call(e){this[xt].call(e)}returnTo(e){this[xt].returnTo(e)}return(){this[xt].return()}constructor(e,{pc:t,scope:n,dynamicScope:s,stack:i},r,a){this.runtime=e,this.elementStack=r,this.context=a,ze(),this.resume=Yi(a);let o=ji.restore(i);J("number"==typeof t,"pc is a number"),o[Tt][ye]=t,o[Tt][ke]=i.length-1,o[Tt][we]=-1,this[_t]=this.program.heap,this[Bt]=this.program.constants,this.elementStack=r,this[Nt].scope.push(n),this[Nt].dynamicScope.push(s),this[At]=new ms,this[xt]=new Li(o,this[_t],e.program,{debugBefore:e=>wn.debugBefore(this,e),debugAfter:e=>{wn.debugAfter(this,e)}},o[Tt]),this.destructor={},this[Ct].push(this.destructor)}static initial(e,t,{handle:n,self:s,dynamicScope:i,treeBuilder:r,numSymbols:a,owner:o}){let l=Et.root(s,a,o),c=Wi(e.program.heap.getaddr(n),l,i),u=Yi(t)(e,c,r);return u.pushUpdating(),u}static empty(e,{handle:t,treeBuilder:n,dynamicScope:s,owner:i},r){let a=Yi(r)(e,Wi(e.program.heap.getaddr(t),Et.root(N,0,i),s),n);return a.pushUpdating(),a}resume;compile(e){return me(e.compile(this.context))}get program(){return this.runtime.program}get env(){return this.runtime.env}captureState(e,t=this[xt].fetchRegister(ye)){return{pc:t,scope:this.scope(),dynamicScope:this.dynamicScope(),stack:this.stack.capture(e)}}capture(e,t=this[xt].fetchRegister(ye)){return new Vi(this.captureState(e,t),this.resume)}beginCacheGroup(e){let t=this.updating(),n=new Vn;t.push(n),t.push(new Un(e)),this[Nt].cache.push(n),nt(e)}commitCacheGroup(){let e=this.updating(),t=F(this[Nt].cache.pop(),"VM BUG: Expected a cache group"),n=st();e.push(new In(t)),t.finalize(n,e.length)}enter(e){let t=this.capture(e),n=this.elements().pushUpdatableBlock(),s=new Ii(t,this.runtime,n,[]);this.didEnter(s)}enterItem({key:e,value:t,memo:n}){let{stack:s}=this,i=G(t),r=G(n);s.push(i),s.push(r);let a=this.capture(2),o=this.elements().pushUpdatableBlock(),l=new $i(a,this.runtime,o,e,r,i);return this.didEnter(l),l}registerItem(e){this.listBlock().initializeChild(e)}enterList(e,t){let n=[],s=this[xt].target(t),i=this.capture(0,s),r=this.elements().pushBlockList(n),a=new Hi(i,this.runtime,r,n,e);this[Nt].list.push(a),this.didEnter(a)}didEnter(e){this.associateDestroyable(e),this[Ct].push(e),this.updateWith(e),this.pushUpdating(e.children)}exit(){this[Ct].pop(),this.elements().popBlock(),this.popUpdating()}exitList(){this.exit(),this[Nt].list.pop()}pushUpdating(e=[]){this[Nt].updating.push(e)}popUpdating(){return F(this[Nt].updating.pop(),"can't pop an empty stack")}updateWith(e){this.updating().push(e)}listBlock(){return F(this[Nt].list.current,"expected a list block")}associateDestroyable(e){let t=F(this[Ct].current,"Expected destructor parent");De(t,e)}tryUpdating(){return this[Nt].updating.current}updating(){return F(this[Nt].updating.current,"expected updating opcode on the updating opcode stack")}elements(){return this.elementStack}scope(){return F(this[Nt].scope.current,"expected scope on the scope stack")}dynamicScope(){return F(this[Nt].dynamicScope.current,"expected dynamic scope on the dynamic scope stack")}pushChildScope(){this[Nt].scope.push(this.scope().child())}pushDynamicScope(){let e=this.dynamicScope().child();return this[Nt].dynamicScope.push(e),e}pushRootScope(e,t){let n=Et.sized(e,t);return this[Nt].scope.push(n),n}pushScope(e){this[Nt].scope.push(e)}popScope(){this[Nt].scope.pop()}popDynamicScope(){this[Nt].dynamicScope.pop()}getOwner(){return this.scope().owner}getSelf(){return this.scope().getSelf()}referenceForSymbol(e){return this.scope().getSymbol(e)}execute(e){{let t=!0;try{let n=this._execute(e);return t=!1,n}finally{if(t){let e=this.elements();for(;e.hasBlocks;)e.popBlock();console.error(`\n\nError occurred:\n\n${bt()}\n\n`)}}}}_execute(e){let t;wt&&q.log(`EXECUTING FROM ${this[xt].fetchRegister(ye)}`),e&&e(this);do{t=this.next()}while(!t.done);return t.value}next(){let e,{env:t,elementStack:n}=this,s=this[xt].nextStatement();return null!==s?(this[xt].evaluateOuter(s,this),e={done:!1,value:null}):(this.stack.reset(),e={done:!0,value:new Pi(t,this.popUpdating(),n.popBlock(),this.destructor)}),e}bindDynamicScope(e){let t=this.dynamicScope();for(const n of fe(e))t.set(n,this.stack.pop())}}function Wi(e,t,n){return{pc:e,scope:t,dynamicScope:n,stack:[]}}function Yi(e){return(t,n,s)=>new zi(t,n,s,e)}class Ji{constructor(e){this.vm=e}next(){return this.vm.next()}sync(){return gt.runInTrackingTransaction((()=>this.vm.execute()),"- While rendering:")}}function qi(e,t){let n;return di(e,(()=>n=t.sync())),n}function Ki(e,t,n,s,i,r,a=new St){let o=me(r.compile(t)),l=r.symbolTable.symbols.length,c=zi.initial(e,t,{self:s,dynamicScope:a,treeBuilder:i,handle:o,numSymbols:l,owner:n});return new Ji(c)}function Xi(e,t,n,s,i,r={},a=new St){return function(e,t,n,s,i){const r=Object.keys(i).map((e=>[e,i[e]])),a=["main","else","attrs"],o=r.map((([e])=>`@${e}`));let l=e[Bt].component(s,n);e.pushFrame();for(let t=0;t<3*a.length;t++)e.stack.push(null);e.stack.push(null),r.forEach((([,t])=>{e.stack.push(t)})),e[At].setup(e.stack,o,a,0,!0);const c=F(l.compilable,"BUG: Expected the root component rendered with renderComponent to have an associated template, set with setComponentTemplate"),u={handle:me(c.compile(t)),symbolTable:c.symbolTable};return e.stack.push(e[At]),e.stack.push(u),e.stack.push(l),new Ji(e)}(zi.empty(e,{treeBuilder:t,handle:n.stdlib.main,dynamicScope:a,owner:s},n),n,s,i,function(e){const t=B(e,"args");return Object.keys(e).reduce(((e,n)=>(e[n]=U(t,n),e)),{})}(r))}const Qi="%+b:0%";function Zi(e){return e.nodeValue===Qi}class er extends Mt{candidate=null;openBlockDepth;injectedOmittedNode=!1;constructor(e,t,n){super(e,t),this.startingBlockDepth=n,this.openBlockDepth=n-1}}class tr extends fn{unmatchedAttributes=null;blockDepth=0;startingBlockOffset;constructor(e,t,n){if(super(e,t,n),n)throw new Error("Rehydration with nextSibling not supported");let s=this.currentCursor.element.firstChild;for(;null!==s&&!nr(s);)s=s.nextSibling;J(s,"Must have opening comment for rehydration."),this.candidate=s;const i=ir(s);if(0!==i){const e=i-1,t=this.dom.createComment(`%+b:${e}%`);s.parentNode.insertBefore(t,this.candidate);let n=s.nextSibling;for(;null!==n&&(!sr(n)||ir(n)!==i);)n=n.nextSibling;J(n,"Must have closing comment for starting block comment");const r=this.dom.createComment(`%-b:${e}%`);s.parentNode.insertBefore(r,n.nextSibling),this.candidate=t,this.startingBlockOffset=e}else this.startingBlockOffset=0}get currentCursor(){return this[mn].current}get candidate(){return this.currentCursor?this.currentCursor.candidate:null}set candidate(e){this.currentCursor.candidate=e}disableRehydration(e){const t=this.currentCursor;t.candidate=null,t.nextSibling=e}enableRehydration(e){const t=this.currentCursor;t.candidate=e,t.nextSibling=null}pushElement(e,t=null){const n=new er(e,t,this.blockDepth||0);null!==this.candidate&&(n.candidate=e.firstChild,this.candidate=e.nextSibling),this[mn].push(n)}clearMismatch(e){let t=e;const n=this.currentCursor;if(null!==n){const e=n.openBlockDepth;if(e>=n.startingBlockDepth)for(;t;){if(sr(t)){if(e>=rr(t,this.startingBlockOffset))break}t=this.remove(t)}else for(;null!==t;)t=this.remove(t);this.disableRehydration(t)}}__openBlock(){const{currentCursor:e}=this;if(null===e)return;const t=this.blockDepth;this.blockDepth++;const{candidate:n}=e;if(null===n)return;const{tagName:s}=e.element;nr(n)&&rr(n,this.startingBlockOffset)===t?(this.candidate=this.remove(n),e.openBlockDepth=t):"TITLE"!==s&&"SCRIPT"!==s&&"STYLE"!==s&&this.clearMismatch(n)}__closeBlock(){const{currentCursor:e}=this;if(null===e)return;const t=e.openBlockDepth;this.blockDepth--;const{candidate:n}=e;let s=!1;if(null!==n)if(s=!0,sr(n)&&rr(n,this.startingBlockOffset)===t){const t=this.remove(n);this.candidate=t,e.openBlockDepth--}else this.clearMismatch(n),s=!1;if(!1===s){const t=e.nextSibling;if(null!==t&&sr(t)&&rr(t,this.startingBlockOffset)===this.blockDepth){const n=this.remove(t);this.enableRehydration(n),e.openBlockDepth--}}}__appendNode(e){const{candidate:t}=this;return t||super.__appendNode(e)}__appendHTML(e){const t=this.markerBounds();if(t){const e=t.firstNode(),n=t.lastNode(),s=new Rt(this.element,e.nextSibling,n.previousSibling),i=this.remove(e);return this.remove(n),null!==i&&lr(i)&&(this.candidate=this.remove(i),null!==this.candidate&&this.clearMismatch(this.candidate)),s}return super.__appendHTML(e)}remove(e){const t=F(e.parentNode,"cannot remove a detached node"),n=e.nextSibling;return t.removeChild(e),n}markerBounds(){const e=this.candidate;if(e&&or(e)){const t=e;let n=F(t.nextSibling,"BUG: serialization markers must be paired");for(;n&&!or(n);)n=F(n.nextSibling,"BUG: serialization markers must be paired");return new Rt(this.element,t,n)}return null}__appendText(e){const{candidate:t}=this;return t?3===t.nodeType?(t.nodeValue!==e&&(t.nodeValue=e),this.candidate=t.nextSibling,t):function(e){return 8===e.nodeType&&"%|%"===e.nodeValue}(t)||lr(t)&&""===e?(this.candidate=this.remove(t),this.__appendText(e)):(this.clearMismatch(t),super.__appendText(e)):super.__appendText(e)}__appendComment(e){const t=this.candidate;return t&&8===t.nodeType?(t.nodeValue!==e&&(t.nodeValue=e),this.candidate=t.nextSibling,t):(t&&this.clearMismatch(t),super.__appendComment(e))}__openElement(e){const t=this.candidate;if(t&&ar(t)&&function(e,t){if(e.namespaceURI===z)return e.tagName===t;return e.tagName===t.toUpperCase()}(t,e))return this.unmatchedAttributes=[].slice.call(t.attributes),t;if(t){if(ar(t)&&"TBODY"===t.tagName)return this.pushElement(t,null),this.currentCursor.injectedOmittedNode=!0,this.__openElement(e);this.clearMismatch(t)}return super.__openElement(e)}__setAttribute(e,t,n){const s=this.unmatchedAttributes;if(s){const n=cr(s,e);if(n)return n.value!==t&&(n.value=t),void s.splice(s.indexOf(n),1)}return super.__setAttribute(e,t,n)}__setProperty(e,t){const n=this.unmatchedAttributes;if(n){const s=cr(n,e);if(s)return s.value!==t&&(s.value=t),void n.splice(n.indexOf(s),1)}return super.__setProperty(e,t)}__flushElement(e,t){const{unmatchedAttributes:n}=this;if(n){for(const e of n)this.constructing.removeAttribute(e.name);this.unmatchedAttributes=null}else super.__flushElement(e,t)}willCloseElement(){const{candidate:e,currentCursor:t}=this;null!==e&&this.clearMismatch(e),t&&t.injectedOmittedNode&&this.popElement(),super.willCloseElement()}getMarker(e,t){const n=e.querySelector(`script[glmr="${t}"]`);return n?ue(n):null}__pushRemoteElement(e,t,n){const s=this.getMarker(W(e,"HTML"),t);if(J(!s||s.parentNode===e,"expected remote element marker's parent node to match remote element"),void 0===n){for(;null!==e.firstChild&&e.firstChild!==s;)this.remove(e.firstChild);n=null}const i=new er(e,null,this.blockDepth);this[mn].push(i),null===s?this.disableRehydration(n):this.candidate=this.remove(s);const r=new bn(e);return this.pushLiveBlock(r,!0)}didAppendBounds(e){if(super.didAppendBounds(e),this.candidate){const t=e.lastNode();this.candidate=t&&t.nextSibling}return e}}function nr(e){return e.nodeType===ge&&0===e.nodeValue.lastIndexOf("%+b:",0)}function sr(e){return e.nodeType===ge&&0===e.nodeValue.lastIndexOf("%-b:",0)}function ir(e){return parseInt(e.nodeValue.slice(4),10)}function rr(e,t){return ir(e)-t}function ar(e){return 1===e.nodeType}function or(e){return 8===e.nodeType&&"%glmr%"===e.nodeValue}function lr(e){return 8===e.nodeType&&"% %"===e.nodeValue}function cr(e,t){for(const n of e)if(n.name===t)return n}function ur(e,t){return tr.forInitialRender(e,t)}export{Rt as ConcreteBounds,An as CurriedValue,Mt as CursorImpl,ii as DOMChanges,Qs as DOMTreeConstruction,sn as DynamicAttribute,St as DynamicScopeImpl,_s as EMPTY_ARGS,Ns as EMPTY_NAMED,Ts as EMPTY_POSITIONAL,ui as EnvironmentImpl,ni as IDOMChanges,zi as LowLevelVM,fn as NewElementBuilder,Et as PartialScopeImpl,tr as RehydrateBuilder,bn as RemoteLiveBlock,Qi as SERIALIZATION_FIRST_NODE_STRING,rn as SimpleDynamicAttribute,Ps as TEMPLATE_ONLY_COMPONENT_MANAGER,js as TemplateOnlyComponent,Gs as TemplateOnlyComponentManager,yn as UpdatableBlockImpl,Di as UpdatingVM,mi as array,Lt as clear,vn as clientBuilder,gi as concat,Ss as createCapturedArgs,Rn as curry,tn as dynamicAttribute,yi as fn,vi as get,Si as hash,di as inTransaction,Ni as invokeHelper,Zi as isSerializationFirstNode,ti as isWhitespace,Ht as normalizeProperty,Oi as on,ur as rehydrationBuilder,Cs as reifyArgs,Es as reifyNamed,xs as reifyPositional,Xi as renderComponent,Ki as renderMain,qi as renderSync,Is as resetDebuggerCallback,pi as runtimeContext,Us as setDebuggerCallback,Fs as templateOnlyComponent};
//# sourceMappingURL=index.js.map
