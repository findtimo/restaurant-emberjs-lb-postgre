{"version":3,"file":"index.js","sources":["../../lib/content.ts","../../lib/flags.ts","../../lib/opcodes.ts","../../lib/registers.ts"],"sourcesContent":["export const ContentType = {\n  Component: 0,\n  Helper: 1,\n  String: 2,\n  Empty: 3,\n  SafeString: 4,\n  Fragment: 5,\n  Node: 6,\n  Other: 8,\n} as const;\n","import type {\n  ARG_SHIFT as IARG_SHIFT,\n  AttributeHookCapability,\n  CreateArgsCapability,\n  CreateCallerCapability,\n  CreateInstanceCapability,\n  CurriedComponent,\n  CurriedHelper,\n  CurriedModifier,\n  DynamicLayoutCapability,\n  DynamicScopeCapability,\n  DynamicTagCapability,\n  ElementHookCapability,\n  EmptyCapability,\n  HasSubOwnerCapability,\n  MACHINE_MASK as IMACHINE_MASK,\n  MAX_SIZE as IMAX_SIZE,\n  OPERAND_LEN_MASK as IOPERAND_LEN_MASK,\n  PrepareArgsCapability,\n  TYPE_MASK as ITYPE_MASK,\n  TYPE_SIZE as ITYPE_SIZE,\n  UpdateHookCapability,\n  WillDestroyCapability,\n  WrappedCapability,\n} from '@glimmer/interfaces';\n\nexport const CurriedTypes = {\n  Component: 0 satisfies CurriedComponent,\n  Helper: 1 satisfies CurriedHelper,\n  Modifier: 2 satisfies CurriedModifier,\n} as const;\n\nexport const InternalComponentCapabilities = {\n  Empty: 0 satisfies EmptyCapability,\n  dynamicLayout: 0b0000000000001 satisfies DynamicLayoutCapability,\n  dynamicTag: 0b0000000000010 satisfies DynamicTagCapability,\n  prepareArgs: 0b0000000000100 satisfies PrepareArgsCapability,\n  createArgs: 0b0000000001000 satisfies CreateArgsCapability,\n  attributeHook: 0b0000000010000 satisfies AttributeHookCapability,\n  elementHook: 0b0000000100000 satisfies ElementHookCapability,\n  dynamicScope: 0b0000001000000 satisfies DynamicScopeCapability,\n  createCaller: 0b0000010000000 satisfies CreateCallerCapability,\n  updateHook: 0b0000100000000 satisfies UpdateHookCapability,\n  createInstance: 0b0001000000000 satisfies CreateInstanceCapability,\n  wrapped: 0b0010000000000 satisfies WrappedCapability,\n  willDestroy: 0b0100000000000 satisfies WillDestroyCapability,\n  hasSubOwner: 0b1000000000000 satisfies HasSubOwnerCapability,\n} as const;\n\nexport const ARG_SHIFT = 8 as const satisfies IARG_SHIFT;\nexport const MAX_SIZE = 0x7fffffff as const satisfies IMAX_SIZE;\nexport const TYPE_SIZE = 0b11111111 as const satisfies ITYPE_SIZE;\nexport const TYPE_MASK = 0b00000000000000000000000011111111 as const satisfies ITYPE_MASK;\nexport const OPERAND_LEN_MASK =\n  0b00000000000000000000001100000000 as const satisfies IOPERAND_LEN_MASK;\nexport const MACHINE_MASK = 0b00000000000000000000010000000000 as const satisfies IMACHINE_MASK;\n","import type {\n  VmAppendDocumentFragment,\n  VmAppendHTML,\n  VmAppendNode,\n  VmAppendSafeHTML,\n  VmAppendText,\n  VmAssertSame,\n  VmBeginComponentTransaction,\n  VmBindDynamicScope,\n  VmBindEvalScope,\n  VmCaptureArgs,\n  VmChildScope,\n  VmCloseElement,\n  VmComment,\n  VmCommitComponentTransaction,\n  VmCompileBlock,\n  VmComponentAttr,\n  VmConcat,\n  VmConstant,\n  VmConstantReference,\n  VmContentType,\n  VmCreateComponent,\n  VmCurry,\n  VmDebugger,\n  VmDidCreateElement,\n  VmDidRenderLayout,\n  VmDup,\n  VmDynamicAttr,\n  VmDynamicContentType,\n  VmDynamicHelper,\n  VmDynamicModifier,\n  VmEnter,\n  VmEnterList,\n  VmExit,\n  VmExitList,\n  VmFetch,\n  VmFlushElement,\n  VmGetBlock,\n  VmGetComponentLayout,\n  VmGetComponentSelf,\n  VmGetComponentTagName,\n  VmGetDynamicVar,\n  VmGetProperty,\n  VmGetVariable,\n  VmHasBlock,\n  VmHasBlockParams,\n  VmHelper,\n  VmIfInline,\n  VmInvokeComponentLayout,\n  VmInvokeYield,\n  VmIterate,\n  VmJumpEq,\n  VmJumpIf,\n  VmJumpUnless,\n  VmLoad,\n  VmLog,\n  VmMachineInvokeStatic,\n  VmMachineInvokeVirtual,\n  VmMachineJump,\n  VmMachineOp,\n  VmMachinePopFrame,\n  VmMachinePushFrame,\n  VmMachineReturn,\n  VmMachineReturnTo,\n  VmMachineSize,\n  VmMain,\n  VmModifier,\n  VmNot,\n  VmOp,\n  VmOpenDynamicElement,\n  VmOpenElement,\n  VmPop,\n  VmPopArgs,\n  VmPopDynamicScope,\n  VmPopRemoteElement,\n  VmPopScope,\n  VmPopulateLayout,\n  VmPrepareArgs,\n  VmPrimitive,\n  VmPrimitiveReference,\n  VmPushArgs,\n  VmPushBlockScope,\n  VmPushComponentDefinition,\n  VmPushDynamicComponentInstance,\n  VmPushDynamicScope,\n  VmPushEmptyArgs,\n  VmPushRemoteElement,\n  VmPushSymbolTable,\n  VmPutComponentOperations,\n  VmRegisterComponentDestructor,\n  VmReifyU32,\n  VmResolveCurriedComponent,\n  VmResolveDynamicComponent,\n  VmResolveMaybeLocal,\n  VmRootScope,\n  VmSetBlock,\n  VmSetBlocks,\n  VmSetNamedVariables,\n  VmSetupForEval,\n  VmSetVariable,\n  VmSize,\n  VmSpreadBlock,\n  VmStaticAttr,\n  VmStaticComponentAttr,\n  VmText,\n  VmToBoolean,\n  VmVirtualRootScope,\n} from '@glimmer/interfaces';\n\nexport const MachineOp = {\n  PushFrame: 0 satisfies VmMachinePushFrame,\n  PopFrame: 1 satisfies VmMachinePopFrame,\n  InvokeVirtual: 2 satisfies VmMachineInvokeVirtual,\n  InvokeStatic: 3 satisfies VmMachineInvokeStatic,\n  Jump: 4 satisfies VmMachineJump,\n  Return: 5 satisfies VmMachineReturn,\n  ReturnTo: 6 satisfies VmMachineReturnTo,\n  Size: 7 satisfies VmMachineSize,\n} as const;\n\nexport const Op = {\n  Helper: 16 satisfies VmHelper,\n  SetNamedVariables: 17 satisfies VmSetNamedVariables,\n  SetBlocks: 18 satisfies VmSetBlocks,\n  SetVariable: 19 satisfies VmSetVariable,\n  SetBlock: 20 satisfies VmSetBlock,\n  GetVariable: 21 satisfies VmGetVariable,\n  GetProperty: 22 satisfies VmGetProperty,\n  GetBlock: 23 satisfies VmGetBlock,\n  SpreadBlock: 24 satisfies VmSpreadBlock,\n  HasBlock: 25 satisfies VmHasBlock,\n  HasBlockParams: 26 satisfies VmHasBlockParams,\n  Concat: 27 satisfies VmConcat,\n  Constant: 28 satisfies VmConstant,\n  ConstantReference: 29 satisfies VmConstantReference,\n  Primitive: 30 satisfies VmPrimitive,\n  PrimitiveReference: 31 satisfies VmPrimitiveReference,\n  ReifyU32: 32 satisfies VmReifyU32,\n  Dup: 33 satisfies VmDup,\n  Pop: 34 satisfies VmPop,\n  Load: 35 satisfies VmLoad,\n  Fetch: 36 satisfies VmFetch,\n  RootScope: 37 satisfies VmRootScope,\n  VirtualRootScope: 38 satisfies VmVirtualRootScope,\n  ChildScope: 39 satisfies VmChildScope,\n  PopScope: 40 satisfies VmPopScope,\n  Text: 41 satisfies VmText,\n  Comment: 42 satisfies VmComment,\n  AppendHTML: 43 satisfies VmAppendHTML,\n  AppendSafeHTML: 44 satisfies VmAppendSafeHTML,\n  AppendDocumentFragment: 45 satisfies VmAppendDocumentFragment,\n  AppendNode: 46 satisfies VmAppendNode,\n  AppendText: 47 satisfies VmAppendText,\n  OpenElement: 48 satisfies VmOpenElement,\n  OpenDynamicElement: 49 satisfies VmOpenDynamicElement,\n  PushRemoteElement: 50 satisfies VmPushRemoteElement,\n  StaticAttr: 51 satisfies VmStaticAttr,\n  DynamicAttr: 52 satisfies VmDynamicAttr,\n  ComponentAttr: 53 satisfies VmComponentAttr,\n  FlushElement: 54 satisfies VmFlushElement,\n  CloseElement: 55 satisfies VmCloseElement,\n  PopRemoteElement: 56 satisfies VmPopRemoteElement,\n  Modifier: 57 satisfies VmModifier,\n  BindDynamicScope: 58 satisfies VmBindDynamicScope,\n  PushDynamicScope: 59 satisfies VmPushDynamicScope,\n  PopDynamicScope: 60 satisfies VmPopDynamicScope,\n  CompileBlock: 61 satisfies VmCompileBlock,\n  PushBlockScope: 62 satisfies VmPushBlockScope,\n  PushSymbolTable: 63 satisfies VmPushSymbolTable,\n  InvokeYield: 64 satisfies VmInvokeYield,\n  JumpIf: 65 satisfies VmJumpIf,\n  JumpUnless: 66 satisfies VmJumpUnless,\n  JumpEq: 67 satisfies VmJumpEq,\n  AssertSame: 68 satisfies VmAssertSame,\n  Enter: 69 satisfies VmEnter,\n  Exit: 70 satisfies VmExit,\n  ToBoolean: 71 satisfies VmToBoolean,\n  EnterList: 72 satisfies VmEnterList,\n  ExitList: 73 satisfies VmExitList,\n  Iterate: 74 satisfies VmIterate,\n  Main: 75 satisfies VmMain,\n  ContentType: 76 satisfies VmContentType,\n  Curry: 77 satisfies VmCurry,\n  PushComponentDefinition: 78 satisfies VmPushComponentDefinition,\n  PushDynamicComponentInstance: 79 satisfies VmPushDynamicComponentInstance,\n  ResolveDynamicComponent: 80 satisfies VmResolveDynamicComponent,\n  ResolveCurriedComponent: 81 satisfies VmResolveCurriedComponent,\n  PushArgs: 82 satisfies VmPushArgs,\n  PushEmptyArgs: 83 satisfies VmPushEmptyArgs,\n  PopArgs: 84 satisfies VmPopArgs,\n  PrepareArgs: 85 satisfies VmPrepareArgs,\n  CaptureArgs: 86 satisfies VmCaptureArgs,\n  CreateComponent: 87 satisfies VmCreateComponent,\n  RegisterComponentDestructor: 88 satisfies VmRegisterComponentDestructor,\n  PutComponentOperations: 89 satisfies VmPutComponentOperations,\n  GetComponentSelf: 90 satisfies VmGetComponentSelf,\n  GetComponentTagName: 91 satisfies VmGetComponentTagName,\n  GetComponentLayout: 92 satisfies VmGetComponentLayout,\n  BindEvalScope: 93 satisfies VmBindEvalScope,\n  SetupForEval: 94 satisfies VmSetupForEval,\n  PopulateLayout: 95 satisfies VmPopulateLayout,\n  InvokeComponentLayout: 96 satisfies VmInvokeComponentLayout,\n  BeginComponentTransaction: 97 satisfies VmBeginComponentTransaction,\n  CommitComponentTransaction: 98 satisfies VmCommitComponentTransaction,\n  DidCreateElement: 99 satisfies VmDidCreateElement,\n  DidRenderLayout: 100 satisfies VmDidRenderLayout,\n  ResolveMaybeLocal: 102 satisfies VmResolveMaybeLocal,\n  Debugger: 103 satisfies VmDebugger,\n  Size: 104 satisfies VmSize,\n  StaticComponentAttr: 105 satisfies VmStaticComponentAttr,\n  DynamicContentType: 106 satisfies VmDynamicContentType,\n  DynamicHelper: 107 satisfies VmDynamicHelper,\n  DynamicModifier: 108 satisfies VmDynamicModifier,\n  IfInline: 109 satisfies VmIfInline,\n  Not: 110 satisfies VmNot,\n  GetDynamicVar: 111 satisfies VmGetDynamicVar,\n  Log: 112 satisfies VmLog,\n} as const;\n\nexport function isMachineOp(value: number): value is VmMachineOp {\n  return value >= 0 && value <= 15;\n}\n\nexport function isOp(value: number): value is VmOp {\n  return value >= 16;\n}\n","/**\n * Registers\n *\n * For the most part, these follows MIPS naming conventions, however the\n * register numbers are different.\n */\n\n// $0 or $pc (program counter): pointer into `program` for the next insturction; -1 means exit\nexport const $pc: MachineRegister.pc = 0;\n// $1 or $ra (return address): pointer into `program` for the return\nexport const $ra: MachineRegister.ra = 1;\n// $2 or $fp (frame pointer): pointer into the `evalStack` for the base of the stack\nexport const $fp: MachineRegister.fp = 2;\n// $3 or $sp (stack pointer): pointer into the `evalStack` for the top of the stack\nexport const $sp: MachineRegister.sp = 3;\n// $4-$5 or $s0-$s1 (saved): callee saved general-purpose registers\nexport const $s0: SavedRegister.s0 = 4;\nexport const $s1: SavedRegister.s1 = 5;\n// $6-$7 or $t0-$t1 (temporaries): caller saved general-purpose registers\nexport const $t0: TemporaryRegister.t0 = 6;\nexport const $t1: TemporaryRegister.t1 = 7;\n// $8 or $v0 (return value)\nexport const $v0 = 8;\n\nexport enum MachineRegister {\n  // These must be in sync with the computed values\n  // above, but TypeScript doesn't like it\n\n  'pc' = 0,\n  'ra' = 1,\n  'fp' = 2,\n  'sp' = 3,\n}\n\nexport function isLowLevelRegister(\n  register: Register | MachineRegister\n): register is Register & MachineRegister {\n  return (register as number) <= $sp;\n}\n\nexport enum SavedRegister {\n  's0' = 4,\n  's1' = 5,\n}\n\nexport enum TemporaryRegister {\n  't0' = 6,\n  't1' = 7,\n}\n\nexport type Register = MachineRegister | SavedRegister | TemporaryRegister | typeof $v0;\nexport type SyscallRegister = SavedRegister | TemporaryRegister | typeof $v0;\n"],"names":["ContentType","Component","Helper","String","Empty","SafeString","Fragment","Node","Other","CurriedTypes","Modifier","InternalComponentCapabilities","dynamicLayout","dynamicTag","prepareArgs","createArgs","attributeHook","elementHook","dynamicScope","createCaller","updateHook","createInstance","wrapped","willDestroy","hasSubOwner","ARG_SHIFT","MAX_SIZE","TYPE_SIZE","TYPE_MASK","OPERAND_LEN_MASK","MACHINE_MASK","MachineOp","PushFrame","PopFrame","InvokeVirtual","InvokeStatic","Jump","Return","ReturnTo","Size","Op","SetNamedVariables","SetBlocks","SetVariable","SetBlock","GetVariable","GetProperty","GetBlock","SpreadBlock","HasBlock","HasBlockParams","Concat","Constant","ConstantReference","Primitive","PrimitiveReference","ReifyU32","Dup","Pop","Load","Fetch","RootScope","VirtualRootScope","ChildScope","PopScope","Text","Comment","AppendHTML","AppendSafeHTML","AppendDocumentFragment","AppendNode","AppendText","OpenElement","OpenDynamicElement","PushRemoteElement","StaticAttr","DynamicAttr","ComponentAttr","FlushElement","CloseElement","PopRemoteElement","BindDynamicScope","PushDynamicScope","PopDynamicScope","CompileBlock","PushBlockScope","PushSymbolTable","InvokeYield","JumpIf","JumpUnless","JumpEq","AssertSame","Enter","Exit","ToBoolean","EnterList","ExitList","Iterate","Main","Curry","PushComponentDefinition","PushDynamicComponentInstance","ResolveDynamicComponent","ResolveCurriedComponent","PushArgs","PushEmptyArgs","PopArgs","PrepareArgs","CaptureArgs","CreateComponent","RegisterComponentDestructor","PutComponentOperations","GetComponentSelf","GetComponentTagName","GetComponentLayout","BindEvalScope","SetupForEval","PopulateLayout","InvokeComponentLayout","BeginComponentTransaction","CommitComponentTransaction","DidCreateElement","DidRenderLayout","ResolveMaybeLocal","Debugger","StaticComponentAttr","DynamicContentType","DynamicHelper","DynamicModifier","IfInline","Not","GetDynamicVar","Log","isMachineOp","value","isOp","$pc","$ra","$fp","$sp","$s0","$s1","$t0","$t1","$v0","MachineRegister","isLowLevelRegister","register","SavedRegister","TemporaryRegister"],"mappings":"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"}