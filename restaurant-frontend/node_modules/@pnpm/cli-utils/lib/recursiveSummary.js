"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.throwOnCommandFail = void 0;
const error_1 = require("@pnpm/error");
class RecursiveFailError extends error_1.PnpmError {
    constructor(command, recursiveSummary, failures) {
        super('RECURSIVE_FAIL', `"${command}" failed in ${failures.length} packages`);
        this.failures = failures;
        this.passes = Object.values(recursiveSummary).filter(({ status }) => status === 'passed').length;
    }
}
function throwOnCommandFail(command, recursiveSummary) {
    const failures = Object.values(recursiveSummary).filter(({ status }) => status === 'failure');
    if (failures.length > 0) {
        throw new RecursiveFailError(command, recursiveSummary, failures);
    }
}
exports.throwOnCommandFail = throwOnCommandFail;
//# sourceMappingURL=recursiveSummary.js.map