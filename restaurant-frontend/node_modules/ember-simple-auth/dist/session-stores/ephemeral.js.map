{"version":3,"file":"ephemeral.js","sources":["../../src/session-stores/ephemeral.js"],"sourcesContent":["import RSVP from 'rsvp';\nimport BaseStore from './base';\n\n/**\n  Session store that __persists data in memory and thus is not actually\n  persistent__. It does also not synchronize the session's state across\n  multiple tabs or windows as those cannot share memory. __This store is mainly\n  useful for testing and will automatically be used when running tests.__\n\n  @class EphemeralStore\n  @module ember-simple-auth/session-stores/ephemeral\n  @extends BaseStore\n  @public\n*/\nexport default BaseStore.extend({\n  init() {\n    this._super(...arguments);\n    this.clear();\n  },\n\n  /**\n    Persists `data`. This replaces all currently stored data.\n\n    @method persist\n    @param {Object} data The data to persist\n    @return {Ember.RSVP.Promise} A promise that resolves when the data has successfully been persisted and rejects otherwise.\n    @public\n  */\n  persist(data) {\n    this._data = JSON.stringify(data || {});\n\n    return RSVP.resolve();\n  },\n\n  /**\n    Returns all data currently stored as a plain object.\n\n    @method restore\n    @return {Ember.RSVP.Promise} A promise that resolves with the data currently persisted in the store when the data has been restored successfully and rejects otherwise.\n    @public\n  */\n  restore() {\n    const data = JSON.parse(this._data) || {};\n\n    return RSVP.resolve(data);\n  },\n\n  /**\n    Clears the store.\n\n    @method clear\n    @return {Ember.RSVP.Promise} A promise that resolves when the store has been cleared successfully and rejects otherwise.\n    @public\n  */\n  clear() {\n    delete this._data;\n    this._data = '{}';\n\n    return RSVP.resolve();\n  }\n});\n"],"names":["BaseStore","extend","init","_super","arguments","clear","persist","data","_data","JSON","stringify","RSVP","resolve","restore","parse"],"mappings":";;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAeA,SAAS,CAACC,MAAM,CAAC;AAC9BC,EAAAA,IAAIA,GAAG;AACL,IAAA,IAAI,CAACC,MAAM,CAAC,GAAGC,SAAS,CAAC,CAAA;IACzB,IAAI,CAACC,KAAK,EAAE,CAAA;GACb;AAED;AACF;AACA;AACA;AACA;AACA;AACA;EAEEC,OAAOA,CAACC,IAAI,EAAE;IACZ,IAAI,CAACC,KAAK,GAAGC,IAAI,CAACC,SAAS,CAACH,IAAI,IAAI,EAAE,CAAC,CAAA;AAEvC,IAAA,OAAOI,IAAI,CAACC,OAAO,EAAE,CAAA;GACtB;AAED;AACF;AACA;AACA;AACA;AACA;AAEEC,EAAAA,OAAOA,GAAG;AACR,IAAA,MAAMN,IAAI,GAAGE,IAAI,CAACK,KAAK,CAAC,IAAI,CAACN,KAAK,CAAC,IAAI,EAAE,CAAA;AAEzC,IAAA,OAAOG,IAAI,CAACC,OAAO,CAACL,IAAI,CAAC,CAAA;GAC1B;AAED;AACF;AACA;AACA;AACA;AACA;AAEEF,EAAAA,KAAKA,GAAG;IACN,OAAO,IAAI,CAACG,KAAK,CAAA;IACjB,IAAI,CAACA,KAAK,GAAG,IAAI,CAAA;AAEjB,IAAA,OAAOG,IAAI,CAACC,OAAO,EAAE,CAAA;AACvB,GAAA;AACF,CAAC,CAAC;;;;"}