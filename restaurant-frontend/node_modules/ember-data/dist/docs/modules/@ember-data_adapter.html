<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>@ember-data/adapter - EmberData Documentation</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="EmberData Documentation" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 5.3.3+58cd284b</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/&lt;Interface&gt; Adapter.html">&lt;Interface&gt; Adapter</a></li>
                                <li><a href="../classes/&lt;Interface&gt; Cache.html">&lt;Interface&gt; Cache</a></li>
                                <li><a href="../classes/&lt;Interface&gt; Handler.html">&lt;Interface&gt; Handler</a></li>
                                <li><a href="../classes/&lt;Interface&gt; LifetimesService.html">&lt;Interface&gt; LifetimesService</a></li>
                                <li><a href="../classes/&lt;Interface&gt; Serializer.html">&lt;Interface&gt; Serializer</a></li>
                                <li><a href="../classes/@ember-data/active-record/request.html">@ember-data/active-record/request</a></li>
                                <li><a href="../classes/@ember-data/adapter/rest.html">@ember-data/adapter/rest</a></li>
                                <li><a href="../classes/@ember-data/json-api/request.html">@ember-data/json-api/request</a></li>
                                <li><a href="../classes/@ember-data/model.html">@ember-data/model</a></li>
                                <li><a href="../classes/@ember-data/request-utils.html">@ember-data/request-utils</a></li>
                                <li><a href="../classes/@ember-data/rest/request.html">@ember-data/rest/request</a></li>
                                <li><a href="../classes/@ember-data/store.html">@ember-data/store</a></li>
                                <li><a href="../classes/@ember-data/tracking.html">@ember-data/tracking</a></li>
                                <li><a href="../classes/AbortError.html">AbortError</a></li>
                                <li><a href="../classes/Adapter.html">Adapter</a></li>
                                <li><a href="../classes/AdapterError.html">AdapterError</a></li>
                                <li><a href="../classes/BelongsToReference.html">BelongsToReference</a></li>
                                <li><a href="../classes/BooleanTransform.html">BooleanTransform</a></li>
                                <li><a href="../classes/BuildURLMixin.html">BuildURLMixin</a></li>
                                <li><a href="../classes/Cache.html">Cache</a></li>
                                <li><a href="../classes/CacheCapabilitiesManager.html">CacheCapabilitiesManager</a></li>
                                <li><a href="../classes/CacheManager.html">CacheManager</a></li>
                                <li><a href="../classes/CanaryFeatureFlags.html">CanaryFeatureFlags</a></li>
                                <li><a href="../classes/ConflictError.html">ConflictError</a></li>
                                <li><a href="../classes/CurrentDeprecations.html">CurrentDeprecations</a></li>
                                <li><a href="../classes/DateTransform.html">DateTransform</a></li>
                                <li><a href="../classes/DebugLogging.html">DebugLogging</a></li>
                                <li><a href="../classes/Document.html">Document</a></li>
                                <li><a href="../classes/EmbeddedRecordsMixin.html">EmbeddedRecordsMixin</a></li>
                                <li><a href="../classes/Errors.html">Errors</a></li>
                                <li><a href="../classes/Fetch.html">Fetch</a></li>
                                <li><a href="../classes/ForbiddenError.html">ForbiddenError</a></li>
                                <li><a href="../classes/Future.html">Future</a></li>
                                <li><a href="../classes/HasManyReference.html">HasManyReference</a></li>
                                <li><a href="../classes/IdentifierCache.html">IdentifierCache</a></li>
                                <li><a href="../classes/InspectorDataAdapter.html">InspectorDataAdapter</a></li>
                                <li><a href="../classes/InvalidError.html">InvalidError</a></li>
                                <li><a href="../classes/JSONAPIAdapter.html">JSONAPIAdapter</a></li>
                                <li><a href="../classes/JSONAPISerializer.html">JSONAPISerializer</a></li>
                                <li><a href="../classes/JSONSerializer.html">JSONSerializer</a></li>
                                <li><a href="../classes/LifetimesService.html">LifetimesService</a></li>
                                <li><a href="../classes/ManyArray.html">ManyArray</a></li>
                                <li><a href="../classes/Model.html">Model</a></li>
                                <li><a href="../classes/NotFoundError.html">NotFoundError</a></li>
                                <li><a href="../classes/NotificationManager.html">NotificationManager</a></li>
                                <li><a href="../classes/NumberTransform.html">NumberTransform</a></li>
                                <li><a href="../classes/PromiseBelongsTo.html">PromiseBelongsTo</a></li>
                                <li><a href="../classes/PromiseManyArray.html">PromiseManyArray</a></li>
                                <li><a href="../classes/RecordArray.html">RecordArray</a></li>
                                <li><a href="../classes/RecordReference.html">RecordReference</a></li>
                                <li><a href="../classes/RequestManager.html">RequestManager</a></li>
                                <li><a href="../classes/RequestStateService.html">RequestStateService</a></li>
                                <li><a href="../classes/RESTAdapter.html">RESTAdapter</a></li>
                                <li><a href="../classes/RESTSerializer.html">RESTSerializer</a></li>
                                <li><a href="../classes/SchemaService.html">SchemaService</a></li>
                                <li><a href="../classes/Serializer.html">Serializer</a></li>
                                <li><a href="../classes/ServerError.html">ServerError</a></li>
                                <li><a href="../classes/Snapshot.html">Snapshot</a></li>
                                <li><a href="../classes/SnapshotRecordArray.html">SnapshotRecordArray</a></li>
                                <li><a href="../classes/StableRecordIdentifier.html">StableRecordIdentifier</a></li>
                                <li><a href="../classes/Store.html">Store</a></li>
                                <li><a href="../classes/StringTransform.html">StringTransform</a></li>
                                <li><a href="../classes/TimeoutError.html">TimeoutError</a></li>
                                <li><a href="../classes/Transform.html">Transform</a></li>
                                <li><a href="../classes/UnauthorizedError.html">UnauthorizedError</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/@ember-data_active-record_request.html">@ember-data/active-record/request</a></li>
                                <li><a href="../modules/@ember-data_adapter.html">@ember-data/adapter</a></li>
                                <li><a href="../modules/@ember-data_adapter_error.html">@ember-data/adapter/error</a></li>
                                <li><a href="../modules/@ember-data_adapter_json-api.html">@ember-data/adapter/json-api</a></li>
                                <li><a href="../modules/@ember-data_adapter_rest.html">@ember-data/adapter/rest</a></li>
                                <li><a href="../modules/@ember-data_canary-features.html">@ember-data/canary-features</a></li>
                                <li><a href="../modules/@ember-data_debug.html">@ember-data/debug</a></li>
                                <li><a href="../modules/@ember-data_deprecations.html">@ember-data/deprecations</a></li>
                                <li><a href="../modules/@ember-data_experimental-preview-types.html">@ember-data/experimental-preview-types</a></li>
                                <li><a href="../modules/@ember-data_graph.html">@ember-data/graph</a></li>
                                <li><a href="../modules/@ember-data_json-api.html">@ember-data/json-api</a></li>
                                <li><a href="../modules/@ember-data_json-api_request.html">@ember-data/json-api/request</a></li>
                                <li><a href="../modules/@ember-data_legacy-compat.html">@ember-data/legacy-compat</a></li>
                                <li><a href="../modules/@ember-data_model.html">@ember-data/model</a></li>
                                <li><a href="../modules/@ember-data_request.html">@ember-data/request</a></li>
                                <li><a href="../modules/@ember-data_request-utils.html">@ember-data/request-utils</a></li>
                                <li><a href="../modules/@ember-data_request_fetch.html">@ember-data/request/fetch</a></li>
                                <li><a href="../modules/@ember-data_rest_request.html">@ember-data/rest/request</a></li>
                                <li><a href="../modules/@ember-data_serializer.html">@ember-data/serializer</a></li>
                                <li><a href="../modules/@ember-data_serializer_json.html">@ember-data/serializer/json</a></li>
                                <li><a href="../modules/@ember-data_serializer_json-api.html">@ember-data/serializer/json-api</a></li>
                                <li><a href="../modules/@ember-data_serializer_rest.html">@ember-data/serializer/rest</a></li>
                                <li><a href="../modules/@ember-data_store.html">@ember-data/store</a></li>
                                <li><a href="../modules/@ember-data_tracking.html">@ember-data/tracking</a></li>
                                <li><a href="../modules/ember-data-overview.html">ember-data-overview</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1>@ember-data_adapter Module</h1>
<div class="box clearfix meta">


        <div class="foundat">
            Defined in: <a href="../files/.._packages_adapter_src_index.ts.html#l204"><code>..&#x2F;packages&#x2F;adapter&#x2F;src&#x2F;index.ts:204</code></a>
        </div>

</div>


<div class="box intro">
    <h2>Overview</h2>
<blockquote style="margin: 1em; padding: .1em 1em .1em 1em; border-left: solid 1em #E34C32; background: #e0e0e0;">
<p>
  ⚠️ <strong>This is LEGACY documentation</strong> for a feature that is no longer encouraged to be used.
  If starting a new app or thinking of implementing a new adapter, consider writing a
  <a href="/ember-data/release/classes/%3CInterface%3E%20Handler">Handler</a> instead to be used with the <a href="https://github.com/emberjs/data/tree/main/packages/request#readme">RequestManager</a>
</p>
</blockquote>
<p>In order to properly fetch and update data, EmberData
needs to understand how to connect to your API.</p>
<p><code>Adapters</code> accept various kinds of requests from the store
and manage fulfillment of the request from your API.</p>
<h3>Request Flow</h3>
<p>When the store decides it needs to issue a request it uses the
following flow to manage the request and process the data.</p>
<ul>
<li>find the appropriate adapter</li>
<li>issue the request to the adapter</li>
<li>await the adapter's response
<ul>
<li>if an error occurs reject with the error</li>
<li>if no error
<ul>
<li>if there is response data
<ul>
<li>pass the response data to the appropriate serializer</li>
<li>update the cache using the JSON:API formatted data from the serializer's response</li>
</ul>
</li>
<li>return the primary record(s) associated with the request</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Request Errors</h3>
<p>When a request errors and your adapter does not have the ability to recover from the error,
you may either reject the promise returned by your adapter method with the error or simply
throw the error.</p>
<p>If the request was for a <code>createRecord</code> <code>updateRecord</code> or <code>deleteRecord</code> special rules
apply to how this error will affect the state of the store and additional properties on
the <code>Error</code> class may be used. See the documentation for these methods in
<a href="/ember-data/release/classes/%3CInterface%3E%20Adapter"><Interface> Adapter</a> for more information.</p>
<h3>Implementing an Adapter</h3>
<p>There are seven required adapter methods, one for each of
the primary request types that EmberData issues.</p>
<p>They are:</p>
<ul>
<li>findRecord</li>
<li>findAll</li>
<li>queryRecord</li>
<li>query</li>
<li>createRecord</li>
<li>updateRecord</li>
<li>deleteRecord</li>
</ul>
<p>Each of these request types has a matching store method that triggers it
and matching <code>requestType</code> that is passed to the serializer's
<code>normalizeResponse</code> method.</p>
<p>If your app only reads data but never writes data, it is not necessary
to implement the methods for create, update, and delete. This extends to
all of the store's find methods with the exception of <code>findRecord</code> (<code>findAll</code>,
<code>query</code>, <code>queryRecord</code>): if you do not use the store method in your app then
your Adapter does not need the method.</p>
<pre class="code prettyprint"><code class="language-ts">async function fetchData(url, options = {}) {
  let response = await fetch(url, options);
  return response.toJSON();
}

export default class ApplicationAdapter {
  findRecord(_, { modelName }, id) {
    return fetchData(<code>.&#x2F;${modelName}s&#x2F;${id}</code>);
  }

  static create() {
    return new this();
  }
}
</code></pre>
<h3>Adapter Resolution</h3>
<p><code>store.adapterFor(name)</code> will lookup adapters defined in <code>app/adapters/</code> and
return an instance.</p>
<p><code>adapterFor</code> first attempts to find an adapter with an exact match on <code>name</code>,
then falls back to checking for the presence of an adapter named <code>application</code>.</p>
<p>If no adapter is found, an error will be thrown.</p>
<pre class="code prettyprint"><code class="language-ts">store.adapterFor('author');

// lookup paths (in order) =&gt;
//   app/adapters/author.js
//   app/adapters/application.js
</code></pre>
<p>Most requests in EmberData are made with respect to a particular <code>type</code> (or <code>modelName</code>)
(e.g., &quot;get me the full collection of <strong>books</strong>&quot; or &quot;get me the <strong>employee</strong> whose id is 37&quot;). We
refer to this as the <strong>primary</strong> resource <code>type</code>.</p>
<p><code>adapterFor</code> is used by the store to find an adapter with a name matching that of the primary
resource <code>type</code> for the request, which then falls back to the <code>application</code> adapter.</p>
<p>It is recommended that applications define only a single <code>application</code> adapter and serializer
where possible, only implementing an adapter specific to the <code>type</code> when absolutely necessary.</p>
<p>If you need to support multiple API versions for the same type, the per-type strategy for
defining adapters might not be adequate.</p>
<p>If you have multiple APIs or multiple API versions and the single application adapter and per-type
strategy does not suite your needs, one strategy is to write an <code>application</code> adapter and serializer
that make use of <code>options</code> to specify the desired format when making a request, then forwards to the
request to the desired adapter or serializer as needed.</p>
<pre class="code prettyprint"><code class="language-app/adapters/application.js">export default class Adapter extends EmberObject {
  findRecord(store, schema, id, snapshot) {
    let { apiVersion } = snapshot.adapterOptions;
    return this.adapterFor(<code>-api-${apiVersion}</code>).findRecord(store, schema, id, snapshot);
  }
}
</code></pre>
<h3>Overriding <code>Store.adapterFor</code></h3>
<pre class="code prettyprint"><code class="language-js">import Store from '@ember-data/store';
import Adapter from '@ember-data/adapter/json-api';

class extends Store {
  #adapter = new Adapter();

  adapterFor() {
    return this.#adapter;
  }
}
</code></pre>
<p>Note: If you are using Ember and would like to make use of <code>service</code> injections in your adapter, you will want to additionally <code>setOwner</code> for the Adapter.</p>
<pre class="code prettyprint"><code class="language-js">import Store from '@ember-data/store';
import Adapter from '@ember-data/adapter/json-api';
import { getOwner, setOwner } from '@ember/owner';

class extends Store {
  #adapter = null;

  adapterFor() {
    let adapter = this.#adapter;
    if (!adapter) {
      const owner = getOwner(this);
      adapter = new Adapter();
      setOwner(adapter, owner);
      this.#adapter = adapter;
    }

    return adapter;
  }
}
</code></pre>
<p>By default when using with Ember you only need to implement this hook if you want your adapter usage to be statically analyzeable. <em>Ember</em><strong>Data</strong> will attempt to resolve adapters using Ember's resolver. To provide a single Adapter for your application like the above you would provide it as the default export of the file <code>app/adapters/application.{js/ts}</code></p>
<h3>Using an Adapter</h3>
<p>Any adapter in <code>app/adapters/</code> can be looked up by <code>name</code> using <code>store.adapterFor(name)</code>.</p>
<h3>Default Adapters</h3>
<p>Applications whose API's structure endpoint URLs <em>very close to</em> or <em>exactly</em> the <strong>REST</strong>
or <strong>JSON:API</strong> convention, the <code>@ember-data/adapter</code> package contains implementations
these applications can extend.</p>
<p>Many applications will find writing their own adapter to be allow greater flexibility,
customization, and maintenance than attempting to override methods in these adapters.</p>

</div>


<div class="yui3-g">
    <div class="yui3-u-1-2">
            <p>This module provides the following classes:</p>

            <ul class="module-classes">
                <li class="module-class">
                    <a href="../classes/Adapter.html">
                        Adapter
                    </a>
                </li>
                <li class="module-class">
                    <a href="../classes/BuildURLMixin.html">
                        BuildURLMixin
                    </a>
                </li>
            </ul>
    </div>


    <div class="yui3-u-1-2">
    </div>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
