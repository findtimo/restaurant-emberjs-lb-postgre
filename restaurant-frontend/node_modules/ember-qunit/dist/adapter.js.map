{"version":3,"file":"adapter.js","sources":["../src/adapter.js"],"sourcesContent":["import TestAdapter from '@ember/test/adapter';\nimport * as QUnit from 'qunit';\n\nexport function nonTestDoneCallback() {}\n\nlet Adapter = TestAdapter.extend({\n  init() {\n    this.doneCallbacks = [];\n    this.qunit = this.qunit || QUnit;\n  },\n\n  asyncStart() {\n    let currentTest = this.qunit.config.current;\n    let done =\n      currentTest && currentTest.assert\n        ? currentTest.assert.async()\n        : nonTestDoneCallback;\n    this.doneCallbacks.push({ test: currentTest, done });\n  },\n\n  asyncEnd() {\n    let currentTest = this.qunit.config.current;\n\n    if (this.doneCallbacks.length === 0) {\n      throw new Error(\n        'Adapter asyncEnd called when no async was expected. Please create an issue in ember-qunit.'\n      );\n    }\n\n    let { test, done } = this.doneCallbacks.pop();\n\n    // In future, we should explore fixing this at a different level, specifically\n    // addressing the pairing of asyncStart/asyncEnd behavior in a more consistent way.\n    if (test === currentTest) {\n      done();\n    }\n  },\n});\n\nexport default Adapter;\n"],"names":["nonTestDoneCallback","Adapter","TestAdapter","extend","init","doneCallbacks","qunit","QUnit","asyncStart","currentTest","config","current","done","assert","async","push","test","asyncEnd","length","Error","pop"],"mappings":";;;AAGO,SAASA,mBAAmBA,GAAG,EAAC;AAEvC,IAAIC,OAAO,GAAGC,WAAW,CAACC,MAAM,CAAC;AAC/BC,EAAAA,IAAIA,GAAG;IACL,IAAI,CAACC,aAAa,GAAG,EAAE,CAAA;AACvB,IAAA,IAAI,CAACC,KAAK,GAAG,IAAI,CAACA,KAAK,IAAIC,KAAK,CAAA;GACjC;AAEDC,EAAAA,UAAUA,GAAG;IACX,IAAIC,WAAW,GAAG,IAAI,CAACH,KAAK,CAACI,MAAM,CAACC,OAAO,CAAA;AAC3C,IAAA,IAAIC,IAAI,GACNH,WAAW,IAAIA,WAAW,CAACI,MAAM,GAC7BJ,WAAW,CAACI,MAAM,CAACC,KAAK,EAAE,GAC1Bd,mBAAmB,CAAA;AACzB,IAAA,IAAI,CAACK,aAAa,CAACU,IAAI,CAAC;AAAEC,MAAAA,IAAI,EAAEP,WAAW;AAAEG,MAAAA,IAAAA;AAAK,KAAC,CAAC,CAAA;GACrD;AAEDK,EAAAA,QAAQA,GAAG;IACT,IAAIR,WAAW,GAAG,IAAI,CAACH,KAAK,CAACI,MAAM,CAACC,OAAO,CAAA;AAE3C,IAAA,IAAI,IAAI,CAACN,aAAa,CAACa,MAAM,KAAK,CAAC,EAAE;AACnC,MAAA,MAAM,IAAIC,KAAK,CACb,4FACF,CAAC,CAAA;AACH,KAAA;IAEA,IAAI;MAAEH,IAAI;AAAEJ,MAAAA,IAAAA;AAAK,KAAC,GAAG,IAAI,CAACP,aAAa,CAACe,GAAG,EAAE,CAAA;;AAE7C;AACA;IACA,IAAIJ,IAAI,KAAKP,WAAW,EAAE;AACxBG,MAAAA,IAAI,EAAE,CAAA;AACR,KAAA;AACF,GAAA;AACF,CAAC;;;;"}