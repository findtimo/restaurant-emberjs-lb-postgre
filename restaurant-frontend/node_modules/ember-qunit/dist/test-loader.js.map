{"version":3,"file":"test-loader.js","sources":["../src/test-loader.js"],"sourcesContent":["import * as QUnit from 'qunit';\nimport AbstractTestLoader, {\n  addModuleIncludeMatcher,\n} from 'ember-cli-test-loader/test-support/index';\n\naddModuleIncludeMatcher(function (moduleName) {\n  return moduleName.match(/\\.jshint$/);\n});\n\nlet moduleLoadFailures = [];\n\nQUnit.done(function () {\n  let length = moduleLoadFailures.length;\n\n  try {\n    if (length === 0) {\n      // do nothing\n    } else if (length === 1) {\n      throw moduleLoadFailures[0];\n    } else {\n      throw new Error('\\n' + moduleLoadFailures.join('\\n'));\n    }\n  } finally {\n    // ensure we release previously captured errors.\n    moduleLoadFailures = [];\n  }\n});\n\nexport class TestLoader extends AbstractTestLoader {\n  moduleLoadFailure(moduleName, error) {\n    moduleLoadFailures.push(error);\n\n    QUnit.module('TestLoader Failures');\n    QUnit.test(moduleName + ': could not be loaded', function () {\n      throw error;\n    });\n  }\n}\n\n/**\n   Load tests following the default patterns:\n\n   * The module name ends with `-test`\n\n   @method loadTests\n */\nexport function loadTests() {\n  new TestLoader().loadModules();\n}\n"],"names":["addModuleIncludeMatcher","moduleName","match","moduleLoadFailures","QUnit","done","length","Error","join","TestLoader","AbstractTestLoader","moduleLoadFailure","error","push","module","test","loadTests","loadModules"],"mappings":";;;AAKAA,uBAAuB,CAAC,UAAUC,UAAU,EAAE;AAC5C,EAAA,OAAOA,UAAU,CAACC,KAAK,CAAC,WAAW,CAAC,CAAA;AACtC,CAAC,CAAC,CAAA;AAEF,IAAIC,kBAAkB,GAAG,EAAE,CAAA;AAE3BC,KAAK,CAACC,IAAI,CAAC,YAAY;AACrB,EAAA,IAAIC,MAAM,GAAGH,kBAAkB,CAACG,MAAM,CAAA;EAEtC,IAAI;IACF,IAAIA,MAAM,KAAK,CAAC,EAAE;AAChB;AAAA,KACD,MAAM,IAAIA,MAAM,KAAK,CAAC,EAAE;MACvB,MAAMH,kBAAkB,CAAC,CAAC,CAAC,CAAA;AAC7B,KAAC,MAAM;MACL,MAAM,IAAII,KAAK,CAAC,IAAI,GAAGJ,kBAAkB,CAACK,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;AACvD,KAAA;AACF,GAAC,SAAS;AACR;AACAL,IAAAA,kBAAkB,GAAG,EAAE,CAAA;AACzB,GAAA;AACF,CAAC,CAAC,CAAA;AAEK,MAAMM,UAAU,SAASC,kBAAkB,CAAC;AACjDC,EAAAA,iBAAiBA,CAACV,UAAU,EAAEW,KAAK,EAAE;AACnCT,IAAAA,kBAAkB,CAACU,IAAI,CAACD,KAAK,CAAC,CAAA;AAE9BR,IAAAA,KAAK,CAACU,MAAM,CAAC,qBAAqB,CAAC,CAAA;AACnCV,IAAAA,KAAK,CAACW,IAAI,CAACd,UAAU,GAAG,uBAAuB,EAAE,YAAY;AAC3D,MAAA,MAAMW,KAAK,CAAA;AACb,KAAC,CAAC,CAAA;AACJ,GAAA;AACF,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASI,SAASA,GAAG;AAC1B,EAAA,IAAIP,UAAU,EAAE,CAACQ,WAAW,EAAE,CAAA;AAChC;;;;"}