"use strict";
var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _ScopeLocals_mapping, _ScopeLocals_locals;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ScopeLocals = void 0;
/*
  This class exists because:
   - before template compilation starts, we need to pass a `locals` array to
     ember-template-compiler
   - the JSUtils API can mutate the scope during template compilation
   - those scope mutations need to update both the original `locals` array and
     our own name mapping, keeping them in sync.
*/
class ScopeLocals {
    constructor() {
        _ScopeLocals_mapping.set(this, {});
        _ScopeLocals_locals.set(this, []);
    }
    get locals() {
        return __classPrivateFieldGet(this, _ScopeLocals_locals, "f");
    }
    has(key) {
        return key in __classPrivateFieldGet(this, _ScopeLocals_mapping, "f");
    }
    get(key) {
        return __classPrivateFieldGet(this, _ScopeLocals_mapping, "f")[key];
    }
    isEmpty() {
        return __classPrivateFieldGet(this, _ScopeLocals_locals, "f").length === 0;
    }
    needsRemapping() {
        return Object.entries(__classPrivateFieldGet(this, _ScopeLocals_mapping, "f")).some(([k, v]) => k !== v);
    }
    entries() {
        return Object.entries(__classPrivateFieldGet(this, _ScopeLocals_mapping, "f"));
    }
    add(key, value) {
        __classPrivateFieldGet(this, _ScopeLocals_mapping, "f")[key] = value !== null && value !== void 0 ? value : key;
        if (!__classPrivateFieldGet(this, _ScopeLocals_locals, "f").includes(key)) {
            __classPrivateFieldGet(this, _ScopeLocals_locals, "f").push(key);
        }
    }
}
exports.ScopeLocals = ScopeLocals;
_ScopeLocals_mapping = new WeakMap(), _ScopeLocals_locals = new WeakMap();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGUtbG9jYWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2NvcGUtbG9jYWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOzs7Ozs7O0VBT0U7QUFDRixNQUFhLFdBQVc7SUFBeEI7UUFDRSwrQkFBbUMsRUFBRSxFQUFDO1FBQ3RDLDhCQUFvQixFQUFFLEVBQUM7SUFnQ3pCLENBQUM7SUE5QkMsSUFBSSxNQUFNO1FBQ1IsT0FBTyx1QkFBQSxJQUFJLDJCQUFRLENBQUM7SUFDdEIsQ0FBQztJQUVELEdBQUcsQ0FBQyxHQUFXO1FBQ2IsT0FBTyxHQUFHLElBQUksdUJBQUEsSUFBSSw0QkFBUyxDQUFDO0lBQzlCLENBQUM7SUFFRCxHQUFHLENBQUMsR0FBVztRQUNiLE9BQU8sdUJBQUEsSUFBSSw0QkFBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyx1QkFBQSxJQUFJLDJCQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsY0FBYztRQUNaLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyx1QkFBQSxJQUFJLDRCQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLHVCQUFBLElBQUksNEJBQVMsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxHQUFHLENBQUMsR0FBVyxFQUFFLEtBQWM7UUFDN0IsdUJBQUEsSUFBSSw0QkFBUyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssYUFBTCxLQUFLLGNBQUwsS0FBSyxHQUFJLEdBQUcsQ0FBQztRQUNsQyxJQUFJLENBQUMsdUJBQUEsSUFBSSwyQkFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUMvQix1QkFBQSxJQUFJLDJCQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3hCO0lBQ0gsQ0FBQztDQUNGO0FBbENELGtDQWtDQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gIFRoaXMgY2xhc3MgZXhpc3RzIGJlY2F1c2U6XG4gICAtIGJlZm9yZSB0ZW1wbGF0ZSBjb21waWxhdGlvbiBzdGFydHMsIHdlIG5lZWQgdG8gcGFzcyBhIGBsb2NhbHNgIGFycmF5IHRvXG4gICAgIGVtYmVyLXRlbXBsYXRlLWNvbXBpbGVyXG4gICAtIHRoZSBKU1V0aWxzIEFQSSBjYW4gbXV0YXRlIHRoZSBzY29wZSBkdXJpbmcgdGVtcGxhdGUgY29tcGlsYXRpb25cbiAgIC0gdGhvc2Ugc2NvcGUgbXV0YXRpb25zIG5lZWQgdG8gdXBkYXRlIGJvdGggdGhlIG9yaWdpbmFsIGBsb2NhbHNgIGFycmF5IGFuZFxuICAgICBvdXIgb3duIG5hbWUgbWFwcGluZywga2VlcGluZyB0aGVtIGluIHN5bmMuXG4qL1xuZXhwb3J0IGNsYXNzIFNjb3BlTG9jYWxzIHtcbiAgI21hcHBpbmc6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgI2xvY2Fsczogc3RyaW5nW10gPSBbXTtcblxuICBnZXQgbG9jYWxzKCkge1xuICAgIHJldHVybiB0aGlzLiNsb2NhbHM7XG4gIH1cblxuICBoYXMoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4ga2V5IGluIHRoaXMuI21hcHBpbmc7XG4gIH1cblxuICBnZXQoa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLiNtYXBwaW5nW2tleV07XG4gIH1cblxuICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNsb2NhbHMubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgbmVlZHNSZW1hcHBpbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMuI21hcHBpbmcpLnNvbWUoKFtrLCB2XSkgPT4gayAhPT0gdik7XG4gIH1cblxuICBlbnRyaWVzKCkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLiNtYXBwaW5nKTtcbiAgfVxuXG4gIGFkZChrZXk6IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpIHtcbiAgICB0aGlzLiNtYXBwaW5nW2tleV0gPSB2YWx1ZSA/PyBrZXk7XG4gICAgaWYgKCF0aGlzLiNsb2NhbHMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgdGhpcy4jbG9jYWxzLnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==