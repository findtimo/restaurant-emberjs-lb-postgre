{"version":3,"file":"paths.js","sourceRoot":"","sources":["paths.ts"],"names":[],"mappings":";;;AAAA,+BAAuG;AAGvG,8EAA8E;AAC9E,UAAU;AACV,6BAA6B;AAC7B,+BAA+B;AAC/B,2BAA2B;AAC3B,EAAE;AACF,SAAgB,gBAAgB,CAAC,OAAe,EAAE,MAAc;IAC9D,IAAI,MAAM,GAAG,IAAA,WAAI,EAAC,IAAA,eAAQ,EAAC,OAAO,EAAE,IAAA,cAAO,EAAC,MAAM,CAAC,CAAC,EAAE,IAAA,eAAQ,EAAC,MAAM,CAAC,CAAC,CAAC;IACxE,IAAI,CAAC,IAAA,iBAAU,EAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;QAClD,MAAM,GAAG,IAAI,GAAG,MAAM,CAAC;KACxB;IACD,IAAI,IAAA,iBAAU,EAAC,MAAM,CAAC,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;QACjD,4CAA4C;QAC5C,yEAAyE;QACzE,yEAAyE;QACzE,kCAAkC;QAClC,OAAO,MAAM,CAAC;KACf;IAED,4EAA4E;IAC5E,gCAAgC;IAChC,OAAO,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AACpC,CAAC;AAhBD,4CAgBC;AAED,iFAAiF;AACjF,uBAAuB;AACvB,SAAgB,iBAAiB,CAAC,UAAoB;IACpD,OAAO,IAAI,MAAM,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;AAC5F,CAAC;AAFD,8CAEC;AAED,SAAgB,YAAY,CAAC,GAAY,EAAE,SAAiB,EAAE,QAAgB;IAC5E,IAAI,GAAG,CAAC,WAAW,CAAC,OAAO,EAAE;QAC3B,MAAM,IAAI,KAAK,CAAC,sDAAsD,CAAC,CAAC;KACzE;IACD,IAAI,MAAM,GAAG,IAAA,cAAO,EAAC,IAAA,cAAO,EAAC,QAAQ,CAAC,EAAE,SAAS,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;IAC/E,IAAI,UAAG,KAAK,GAAG,EAAE;QACf,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,UAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACtC;IACD,OAAO,MAAM,CAAC;AAChB,CAAC;AATD,oCASC;AAED,MAAM,SAAS,GAAG,UAAU,CAAC;AAE7B,mEAAmE;AACnE,gEAAgE;AAChE,SAAgB,QAAQ,CAAC,GAAW;IAClC,OAAO,GAAG,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;AACpC,CAAC;AAFD,4BAEC;AAED,sDAAsD;AACtD,yDAAyD;AACzD,SAAgB,qBAAqB,CAAC,QAAgB;IACpD,IAAI,EAAE,GAAG,EAAE,GAAG,IAAA,YAAS,EAAC,QAAQ,CAAC,CAAC;IAClC,OAAO,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC;AAClE,CAAC;AAHD,sDAGC","sourcesContent":["import { relative, isAbsolute, dirname, join, basename, resolve, sep, parse as pathParse } from 'path';\nimport type Package from './package';\n\n// by \"explicit\", I mean that we want \"./local/thing\" instead of \"local/thing\"\n// because\n//     import \"./local/thing\"\n// has a different meaning than\n//     import \"local/thing\"\n//\nexport function explicitRelative(fromDir: string, toFile: string) {\n  let result = join(relative(fromDir, dirname(toFile)), basename(toFile));\n  if (!isAbsolute(result) && !result.startsWith('.')) {\n    result = './' + result;\n  }\n  if (isAbsolute(toFile) && result.endsWith(toFile)) {\n    // this prevents silly \"relative\" paths like\n    // \"../../../../../Users/you/projects/your/stuff\" when we could have just\n    // said \"/Users/you/projects/your/stuff\". The silly path isn't incorrect,\n    // but it's unnecessarily verbose.\n    return toFile;\n  }\n\n  // windows supports both kinds of path separators but webpack wants relative\n  // paths to use forward slashes.\n  return result.replace(/\\\\/g, '/');\n}\n\n// given a list like ['.js', '.ts'], return a regular expression for files ending\n// in those extensions.\nexport function extensionsPattern(extensions: string[]): RegExp {\n  return new RegExp(`(${extensions.map(e => `${e.replace('.', '\\\\.')}`).join('|')})$`, 'i');\n}\n\nexport function unrelativize(pkg: Package, specifier: string, fromFile: string) {\n  if (pkg.packageJSON.exports) {\n    throw new Error(`unsupported: engines cannot use package.json exports`);\n  }\n  let result = resolve(dirname(fromFile), specifier).replace(pkg.root, pkg.name);\n  if (sep !== '/') {\n    result = result.split(sep).join('/');\n  }\n  return result;\n}\n\nconst postfixRE = /[?#].*$/s;\n\n// this is the same implementation Vite uses internally to keep its\n// cache-busting query params from leaking where they shouldn't.\nexport function cleanUrl(url: string): string {\n  return url.replace(postfixRE, '');\n}\n\n// given a filename, returns it with the hbs extension\n// for instance, passing filename.js returns filename.hbs\nexport function correspondingTemplate(filename: string): string {\n  let { ext } = pathParse(filename);\n  return filename.slice(0, filename.length - ext.length) + '.hbs';\n}\n"]}